(function(e){function t(t){for(var n,i,s=t[0],c=t[1],l=t[2],u=0,h=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&h.push(o[i][0]),o[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(h.length)h.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,s=1;s<a.length;s++){var c=a[s];0!==o[c]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},o={app:0},r=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/jscara-console/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=c;r.push([1,"chunk-vendors"]),a()})({0:function(e,t){},"034f":function(e,t,a){"use strict";var n=a("8a23"),o=a.n(n);o.a},1:function(e,t,a){e.exports=a("cd49")},2:function(e,t){},3:function(e,t){},"3ab7":function(e,t,a){"use strict";var n=a("4a7e"),o=a.n(n);o.a},4230:function(e,t,a){},"4a7e":function(e,t,a){},"8a23":function(e,t,a){},"8c83":function(e,t,a){},"9e3e":function(e,t,a){"use strict";(function(e){a("b0c0"),a("ac1f"),a("5319");var n=a("53ca"),o="object"===("undefined"===typeof window?"undefined":Object(n["a"])(window))&&window.window===window?window:"object"===("undefined"===typeof self?"undefined":Object(n["a"])(self))&&self.self===self?self:"object"===("undefined"===typeof e?"undefined":Object(n["a"])(e))&&e.global===e?e:void 0;function r(e,t){return"undefined"===typeof t?t={autoBom:!1}:"object"!==Object(n["a"])(t)&&(t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}function i(e,t,a){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){d(n.response,t,a)},n.onerror=function(){alert("Error: could not download file!")},n.send()}function s(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(a){}return t.status>=200&&t.status<=299}function c(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(a){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var l=/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d="object"!==("undefined"===typeof window?"undefined":Object(n["a"])(window))||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(e,t,a){var n=o.URL||o.webkitURL,r=document.createElement("a");t=t||e.name||"download",r.download=t,r.rel="noopener","string"===typeof e?(r.href=e,r.origin!==location.origin?s(r.href)?i(e,t,a):c(r,r.target="_blank"):c(r)):(r.href=n.createObjectURL(e),setTimeout((function(){n.revokeObjectURL(r.href)}),4e4),setTimeout((function(){c(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,a){if(t=t||e.name||"download","string"===typeof e)if(s(e))i(e,t,a);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout((function(){c(n)}))}else navigator.msSaveOrOpenBlob(r(e,a),t)}:function(e,t,a,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),"string"===typeof e)return i(e,t,a);var r="application/octet-stream"===e.type,s=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||r&&s||l)&&"undefined"!==typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location=e,n=null},d.readAsDataURL(e)}else{var u=o.URL||o.webkitURL,h=u.createObjectURL(e);n?n.location=h:location.href=h,n=null,setTimeout((function(){u.revokeObjectURL(h)}),4e4)}};t["a"]=d}).call(this,a("c8ba"))},b396:function(e,t,a){"use strict";var n=a("8c83"),o=a.n(n);o.a},cccb:function(e,t,a){"use strict";var n=a("4230"),o=a.n(n);o.a},cd49:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{dark:""}},[a("Header"),a("v-content",{staticStyle:{"margin-top":"20px"}},[a("router-view")],1),a("Footer")],1)},r=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.$vuetify.breakpoint.xsOnly?a("v-navigation-drawer",{attrs:{clipped:"","mobile-break-point":"600",width:"180"},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{shaped:""}},e._l(e.navList,(function(t,n){return a("v-list-tile",{key:n,attrs:{to:t.url,draggable:!1},on:{click:function(t){e.drawer=!1}}},[t.icon?a("v-list-tile-action",{staticStyle:{"margin-right":"0px"}},[a("v-icon",[e._v(e._s(t.icon||"grip-lines"))])],1):e._e(),a("v-list-tile-content",[a("v-list-tile-title",{staticStyle:{"font-size":"120%"}},[e._v(" "+e._s(t.name)+" ")])],1)],1)})),1)],1):e._e(),a("v-toolbar",[e.$vuetify.breakpoint.xsOnly?a("span",[a("div",{on:{click:function(t){e.drawer=!e.drawer}}},[a("v-icon",[e._v("fa-bars")])],1)]):e._e(),a("v-toolbar-title",{staticClass:"headline"},[a("router-link",{staticClass:"header-logo",staticStyle:{"text-decoration":"none"},attrs:{to:"/"}},[a("span",[e._v("JSCARA")])])],1),e.$vuetify.breakpoint.smAndUp?a("v-spacer"):e._e(),e.$vuetify.breakpoint.smAndUp?a("span",e._l(e.navList,(function(t,n){return a("v-btn",{key:n,staticClass:"header-nav",attrs:{to:t.url}},[a("span",{staticClass:"mr-2"},[e._v(e._s(t.name))]),a("v-icon",[e._v("fas "+e._s(t.icon))])],1)})),1):e._e()],1)],1)},s=[],c=n["default"].extend({data:function(){return{drawer:!1}},computed:{navList:function(){var e=[];return e}}}),l=c,d=(a("3ab7"),a("2877")),u=a("6544"),h=a.n(u),p=a("8336"),f=a("132d"),v=a("8860"),_=a("f774"),g=a("2fa4"),m=a("71d9"),b=a("2a7f"),w=Object(d["a"])(l,i,s,!1,null,"71fb3f7b",null),x=w.exports;h()(w,{VBtn:p["a"],VIcon:f["a"],VList:v["a"],VNavigationDrawer:_["a"],VSpacer:g["a"],VToolbar:m["a"],VToolbarTitle:b["a"]});var y=n["default"].extend({name:"App",components:{Header:x}}),k=y,S=(a("034f"),a("7496")),M=a("a75b"),G=Object(d["a"])(k,o,r,!1,null,null,null),C=G.exports;h()(G,{VApp:S["a"],VContent:M["a"]});var j,O,T=a("8c4f"),E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-left":"24px"},attrs:{id:"serial-pane"}},[e._m(0),e.serial_connected?a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("v-text-field",{staticStyle:{"max-width":"500px","margin-right":"30px"},attrs:{label:"GCODE Command",outlined:"",autocomplete:"off"},nativeOn:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.write_cmd_to_serial(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.recover_prev_cmd(1)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.recover_prev_cmd(-1)}]},model:{value:e.cmd,callback:function(t){e.cmd=t},expression:"cmd"}}),a("v-btn",{staticStyle:{transform:"scale(1.2)"},on:{click:e.write_cmd_to_serial}},[e._v(" Send ")])],1):a("div",[e.attempting_to_connect?a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.cancel_connect=!0}}},[e._v(" Cancel Connect to SCARA ")]):a("v-btn",{attrs:{color:"primary"},on:{click:e.serial_connect}},[e._v(" Connect to SCARA ")])],1),e.serial_connected?a("div",[a("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:e.origin_scara}},[e._v(" Origin ")]),a("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:function(t){return e.write_serial("G92 X0 Y0\n")}}},[e._v(" XY=0 ")]),a("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:function(t){return e.write_serial("G92 Z0\n")}}},[e._v(" Z=0 ")]),a("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:function(t){return e.write_serial("G92 X0 Y0 Z0\n")}}},[e._v(" XYZ=0 ")]),a("br"),a("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:e.clear_buffer}},[e._v(" Clear Buffer ")]),a("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:function(t){e.write_serial("M410\n"),e.ready_to_send=!0}}},[e._v(" Quickstop ")]),a("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:function(t){return e.write_serial("M112\n")}}},[e._v(" E-Stop ")]),a("br"),a("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:function(t){return e.home_scara()}}},[e._v(" Home ")]),a("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:function(t){return e.home_scara(!0)}}},[e._v(" Fold-Up ")]),a("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:function(t){return e.write_serial("M18\n")}}},[e._v(" Release ")]),a("br"),a("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:function(t){return e.write_serial("M106 S255\n")}}},[e._v(" Suck On ")]),a("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:function(t){return e.write_serial("M106 S0\n")}}},[e._v(" Suck Off ")]),a("div",{staticStyle:{display:"flex","align-items":"stretch"}},[a("div",{staticClass:"jog-box"},[a("div",{staticClass:"jog-col"},[a("v-text-field",{staticStyle:{"text-align":"center"},attrs:{type:"number",step:"5"},model:{value:e.jog_inc["x"],callback:function(t){e.$set(e.jog_inc,"x",e._n(t))},expression:"jog_inc['x']"}}),a("v-btn",{staticClass:"jog-btn",on:{click:function(t){return e.write_serial("G91\nG0 X"+e.jog_inc["x"]+"\nG90\n")}}},[e._v(" +X ")]),a("v-btn",{staticClass:"jog-btn",on:{click:function(t){return e.write_serial("G91\nG0 X-"+e.jog_inc["x"]+"\nG90\n")}}},[e._v(" -X ")])],1),a("div",{staticClass:"jog-col"},[a("v-text-field",{staticStyle:{"text-align":"center"},attrs:{type:"number",step:"5"},model:{value:e.jog_inc["y"],callback:function(t){e.$set(e.jog_inc,"y",e._n(t))},expression:"jog_inc['y']"}}),a("v-btn",{staticClass:"jog-btn",on:{click:function(t){return e.write_serial("G91\nG0 Y"+e.jog_inc["y"]+"\nG90\n")}}},[e._v(" +Y ")]),a("v-btn",{staticClass:"jog-btn",on:{click:function(t){return e.write_serial("G91\nG0 Y-"+e.jog_inc["y"]+"\nG90\n")}}},[e._v(" -Y ")])],1),a("div",{staticClass:"jog-col"},[a("v-text-field",{staticStyle:{"text-align":"center"},attrs:{type:"number",step:"5"},model:{value:e.jog_inc["z"],callback:function(t){e.$set(e.jog_inc,"z",e._n(t))},expression:"jog_inc['z']"}}),a("v-btn",{staticClass:"jog-btn",on:{click:function(t){e.write_serial("G91\nG0 Z"+Math.max(1,e.jog_inc["z"])+"\nG90\n")}}},[e._v(" +Z ")]),a("v-btn",{staticClass:"jog-btn",on:{click:function(t){e.write_serial("G91\nG0 Z-"+Math.max(1,e.jog_inc["z"])+"\nG90\n")}}},[e._v(" -Z ")])],1)]),a("div",{staticStyle:{width:"240px",margin:"10px 20px",padding:"16px 30px","background-color":"#ffb8b8","border-radius":"10px",display:"flex","align-items":"center","justify-content":"center","flex-direction":"column"}},[a("v-row",[a("v-text-field",{staticStyle:{width:"100px"},attrs:{type:"number",label:"X Position"},model:{value:e.goto.x,callback:function(t){e.$set(e.goto,"x",e._n(t))},expression:"goto.x"}}),a("div"),a("v-text-field",{staticStyle:{width:"100px"},attrs:{type:"number",label:"Y Position"},model:{value:e.goto.y,callback:function(t){e.$set(e.goto,"y",e._n(t))},expression:"goto.y"}})],1),a("v-row",{attrs:{justify:"center"}},[a("v-btn",{on:{click:e.goto_point}},[e._v("Go To")])],1)],1)]),a("v-text-field",{staticStyle:{width:"100px"},attrs:{type:"number",label:"X Offset"},model:{value:e.scara_conv.x_offset,callback:function(t){e.$set(e.scara_conv,"x_offset",e._n(t))},expression:"scara_conv.x_offset"}}),a("v-text-field",{staticStyle:{width:"100px"},attrs:{type:"number",label:"Y Offset"},model:{value:e.scara_conv.y_offset,callback:function(t){e.$set(e.scara_conv,"y_offset",e._n(t))},expression:"scara_conv.y_offset"}})],1):e._e(),a("div",{staticStyle:{"margin-top":"14px","min-height":"20vh","max-height":"30vh",width:"90%","overflow-y":"scroll",border:"1px dotted #333"}},e._l(e.serial_log,(function(t,n){return a("span",{key:n,domProps:{innerHTML:e._s(t)}})})),0),a("v-expansion-panels",[a("v-expansion-panel",[a("v-expansion-panel-header",{attrs:{color:"#333"}},[e._v(" Text 🢂 SCARA ")]),a("v-expansion-panel-content",[a("TextToGcode",{attrs:{x_offset:e.scara_conv.x_offset,y_offset:e.scara_conv.y_offset},on:{gcodegen:e.gcode_from_text}}),a("br"),e.converted_gcode.length>0?a("v-btn",{on:{click:e.send_converted_gcode}},[e._v(" Send Converted GCODE ")]):e._e(),e.raw_gcode.length>0?a("v-btn",{on:{click:e.regen_converted_gcode}},[e._v(" Regen SCARA GCODE ")]):e._e(),e.converted_gcode.length>0?a("v-btn",{on:{click:function(t){e.save_gcode(e.converted_gcode.join("\n"))}}},[e._v(" Save Converted GCODE ")]):e._e()],1)],1),a("v-expansion-panel",[a("v-expansion-panel-header",{attrs:{color:"#333"}},[e._v(" Image 🢂 SCARA ")]),a("v-expansion-panel-content",[a("ImgToGcode",{on:{gcodegen:e.gcode_from_text}}),a("br"),e.converted_gcode.length>0?a("v-btn",{on:{click:e.send_converted_gcode}},[e._v(" Send Converted GCODE ")]):e._e(),e.raw_gcode.length>0?a("v-btn",{on:{click:e.regen_converted_gcode}},[e._v(" Regen SCARA GCODE ")]):e._e(),e.converted_gcode.length>0?a("v-btn",{on:{click:function(t){return e.save_gcode(e.raw_gcode)}}},[e._v(" Save Raw GCODE ")]):e._e()],1)],1),a("v-expansion-panel",[a("v-expansion-panel-header",[e._v(" GCode Uploader ")]),a("v-expansion-panel-content",[a("v-file-input",{attrs:{placeholder:"Upload Cartesian GCODE"},on:{change:e.load_gcode_file}}),a("br"),e.converted_gcode.length>0?a("v-btn",{on:{click:e.send_converted_gcode}},[e._v(" Send Converted GCODE ")]):e._e(),e.raw_gcode.length>0?a("v-btn",{on:{click:e.regen_converted_gcode}},[e._v(" Regen SCARA GCODE ")]):e._e()],1)],1),a("v-expansion-panel",[a("v-expansion-panel-header",[e._v(" SCARA Sim ")]),a("v-expansion-panel-content",[a("ScaraSim3D",{attrs:{uploaded_gcode:this.raw_gcode,x_offset:e.scara_conv.x_offset,y_offset:e.scara_conv.y_offset}})],1)],1)],1)],1)},Y=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"notSupported"}},[e._v(" Sorry, "),a("b",[e._v("Web Serial")]),e._v(" is not supported on this device, make sure you're running Chrome 78 or later and have enabled the "),a("code",[e._v("#enable-experimental-web-platform-features")]),e._v(" flag in "),a("code",[e._v("chrome://flags")])])}];a("99af"),a("d3b7"),a("ac1f"),a("1276"),a("ddb0"),a("96cf");function R(){return new Worker(a.p+"js/serialworker.d074fea6.worker.js")}(function(e){e[e["SerialConnect"]=0]="SerialConnect",e[e["PushToBuffer"]=1]="PushToBuffer",e[e["ReplaceBuffer"]=2]="ReplaceBuffer",e[e["ClearBuffer"]=3]="ClearBuffer"})(j||(j={})),function(e){e[e["SerialConnected"]=0]="SerialConnected",e[e["SerialError"]=1]="SerialError",e[e["SerialRecv"]=2]="SerialRecv"}(O||(O={}));a("a4d3"),a("cb29"),a("4de4"),a("4160"),a("caad"),a("a15b"),a("d81d"),a("13d5"),a("4057"),a("b680"),a("e439"),a("dbb4"),a("b64b"),a("acd8"),a("5319"),a("159b");var X=a("3835"),P=a("ade3"),L=a("d4ec"),A=a("bee2");function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(a),!0).forEach((function(t){Object(P["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var D,I=a("d74a");(function(e){e[e["Left"]=-1]="Left",e[e["Right"]=1]="Right"})(D||(D={}));var V={L1:120,L2:120,a1_driver_teeth:20,a1_receiver_teeth:80,a1_steps_per_rev:50,a2_driver_teeth:20,a2_receiver_teeth:80,a2_secondary_receiver_teeth:80,a2_steps_per_rev:50,max_speed:2e4,x_estop_offset:185,y_estop_offset:115},N=function(){function e(t){Object(L["a"])(this,e),this.last_hand=D.Right,this.x_offset=0,this.y_offset=60,this.inner_rad=0,this.skew=0,this.feed_rate=2e3,this.pref_hand=D.Right,this.max_seg_length=.1,this.scara_props=V,this.error_reporter=t||function(e){alert&&alert(e)}}return Object(A["a"])(e,[{key:"valid_point",value:function(e,t){return t<=Math.sqrt(Math.pow(this.scara_props.L1+this.scara_props.L2,2)-Math.pow(e,2))}},{key:"parse_gcode_move",value:function(e){var t={X:void 0,Y:void 0,Z:void 0,F:void 0,E:void 0};for(var a in e){var n=e[a];"X"===n[0]&&(t.X=n[1]),"Y"===n[0]&&(t.Y=n[1]),"Z"===n[0]&&(t.Z=n[1]),"E"===n[0]&&(t.E=n[1]),"F"===n[0]&&(t.F=n[1])}return t}},{key:"scara_distance",value:function(e,t){return Math.sqrt(Math.pow(t.a1-e.a1,2)+Math.pow(t.a2-e.a2,2)+Math.pow(t.Z-e.Z,2))}},{key:"map_cartesian_to_scara",value:function(e){var t=this,a=void 0,n=function(n,o){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={a1:0,a2:0,hand:t.last_hand*(r?-1:1),F:0,Z:0,E:0},s=Math.hypot(n,o),c=Math.atan2(o,n);if(i.a1=180*(c+i.hand*Math.acos((Math.pow(s,2)+Math.pow(t.scara_props.L1,2)-Math.pow(t.scara_props.L2,2))/(2*t.scara_props.L1*s)))/Math.PI,i.a2=180*(c-i.hand*Math.acos((Math.pow(s,2)+Math.pow(t.scara_props.L2,2)-Math.pow(t.scara_props.L1,2))/(2*t.scara_props.L2*s)))/Math.PI,isNaN(i.a1)||isNaN(i.a2))return a="ERROR: Conversion failed - GCODE results in NaNs!",void console.log(a,e,i,t.valid_point(n,o));if(i.a1>=180||i.a1<=-180)return a="ERROR: Conversion failed: GCODE falls outside useable work area!",void console.log(a,e,i);var l=i.a2+(180-i.a1),d=360-l;return Math.abs(l)<30||Math.abs(d)<30?(a="ERROR: Conversion failed: GCODE causes arms to cross!",void console.log(a,e,i,l,d)):i},o=n(e.X,e.Y);if(void 0==o&&(o=n(e.X,e.Y,!0)),void 0==o)throw this.error_reporter(a),a;return o.a1=parseFloat(o.a1.toFixed(2)),o.a2=parseFloat(o.a2.toFixed(2)),o.Z=e.Z,o.E=e.E,this.last_hand=o.hand,o}},{key:"cartesian_to_scara_feedrate",value:function(e,t,a){var n=this.scara_props.L1,o=this.scara_props.L2,r=this.pref_hand,i=Math.sqrt(Math.pow(t.X-e.X,2)+Math.pow(t.Y-e.Y,2));if(0===i)return 0;var s=(t.X-e.X)/i*a,c=(t.Y-e.Y)/i*a,l=Math.sqrt(Math.pow(e.X,2)+Math.pow(e.Y,2)),d=(e.X*s+e.Y*c)/Math.sqrt(Math.pow(e.X,2)+Math.pow(e.Y,2)),u=(e.X*c-e.Y*s)/Math.pow(l,2),h=u-r*d*(2*Math.pow(l,2)*n-Math.pow(l,2)-Math.pow(n,2)+Math.pow(o,2))/(2*Math.pow(l,2)*Math.pow(n,2))*Math.sqrt(1-(Math.pow(l,2)+Math.pow(n,2)-Math.pow(o,2))/(2*l*n)),p=u+r*d*(2*Math.pow(l,2)*o-Math.pow(l,2)-Math.pow(o,2)+Math.pow(n,2))/(2*Math.pow(l,2)*Math.pow(o,2))*Math.sqrt(1-(Math.pow(l,2)+Math.pow(o,2)-Math.pow(n,2))/(2*l*o)),f=Math.sqrt(Math.pow(h,2)+Math.pow(p,2));return parseFloat(Math.min(Math.abs(180*Math.round(f)/Math.PI),this.scara_props.max_speed).toFixed(1))}},{key:"interpolate",value:function(e,t,a,n){return{X:(a*t.X+(n-a)*e.X)/n,Y:(a*t.Y+(n-a)*e.Y)/n,Z:(a*t.Z+(n-a)*e.Z)/n,E:(a*t.E+(n-a)*e.E)/n,F:this.feed_rate}}},{key:"segmentize_cartesian_to_scara",value:function(e,t){var a=this,n=this.scara_distance(this.map_cartesian_to_scara(e),this.map_cartesian_to_scara(t));if(n<=this.max_seg_length)return[this.map_cartesian_to_scara(t)];var o=Math.round(Math.ceil(n/this.max_seg_length));return Array(o).fill(0).map((function(n,r){return a.map_cartesian_to_scara(a.interpolate(e,t,r+1,o))}))}},{key:"translate",value:function(e){var t=F({},e),a=(Math.hypot(e.X,e.Y),Math.atan2(e.Y,e.X));this.skew;return t.X=e.X+this.x_offset,t.Y=e.Y+this.y_offset,t}},{key:"plot_scara_move",value:function(e,t){var a=[],n=I.parseLine(e);if(0===n.words.length)return[[],t];if("G"===n.words[0][0]&&[0,1].includes(n.words[0][1])||!["G","M"].includes(n.words[0][0])){var o=!1;"G"===n.words[0][0]&&0===n.words[0][1]&&(o=!0);var r=this.parse_gcode_move(n.words);if(r.Y=r.Y+this.inner_rad,isNaN(r.X)&&(r.X=t.X),isNaN(r.Y)&&(r.Y=t.Y),isNaN(r.Z)&&(r.Z=t.Z),isNaN(r.E)&&(r.E=t.E),isNaN(r.F)&&(r.F=t.F),r.X===t.X&&r.Y===t.Y)return r.Z!==t.Z&&a.push("G1 Z".concat(r.Z," F").concat(r.F)),[a,r];if(void 0===t.X&&void 0===t.Y||o){var i=this.map_cartesian_to_scara(this.translate(r));return a.push("G0 X".concat(i.a1," Y").concat(i.a2," Z").concat(i.Z," F").concat(this.scara_props.max_speed)),[a,r]}var s=Math.sqrt(Math.pow(r.X-t.X,2)+Math.pow(r.Y-t.Y,2)),c={X:t.X,Y:t.Y,Z:t.Z};while(s>this.max_seg_length){c={X:c.X+(r.X-c.X)*this.max_seg_length/s,Y:c.Y+(r.Y-c.Y)*this.max_seg_length/s,Z:c.Z+(r.Z-c.Z)*this.max_seg_length/s};var l=this.map_cartesian_to_scara(this.translate(c)),d=this.cartesian_to_scara_feedrate(c,r,r.F);a.push("G1 X".concat(l.a1," Y").concat(l.a2," Z").concat(l.Z," F").concat(d)),s=Math.sqrt(Math.pow(r.X-c.X,2)+Math.pow(r.Y-c.Y,2))}var u=this.map_cartesian_to_scara(this.translate(c)),h=this.cartesian_to_scara_feedrate(c,r,r.F);return a.push("G1 X".concat(u.a1," Y").concat(u.a2," Z").concat(u.Z," F").concat(h)),[a,r]}return"G"===n.words[0][0]&&92.1===n.words[0][1]?[[],{X:0,Y:0,Z:0,E:0,F:t.F}]:[["(unable to parse line: ".concat(e,")")],t]}},{key:"convert_cartesian_to_scara",value:function(e){var t=this;e=e.replace(/[N]\d+(?= [^G])/g,"G1"),e=e.replace(/[N]\d+ /g,"");var a=e.split("\n"),n={X:void 0,Y:void 0,Z:0,F:this.feed_rate},o=("M92 X".concat(this.scara_props.a1_steps_per_rev/360*(this.scara_props.a1_receiver_teeth/this.scara_props.a1_driver_teeth)),"M92 Y".concat(this.scara_props.a2_steps_per_rev/360*(this.scara_props.a2_receiver_teeth/this.scara_props.a2_driver_teeth)*(this.scara_props.a2_secondary_receiver_teeth/this.scara_props.a2_receiver_teeth)),a.reduce((function(e,a){var o=[],r=t.plot_scara_move(a,n),i=Object(X["a"])(r,2);return o=i[0],n=i[1],e.concat(o)}),[]));return o.join("\n")}}]),e}(),z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-scene",{staticStyle:{width:"600px",height:"400px",margin:"auto"},attrs:{embedded:"","vr-mode-ui":"enabled: false"}},[a("a-entity",[a("a-cylinder",{attrs:{position:"0 140 -44",radius:"8",height:"280",color:"#444444"}}),a("a-cylinder",{attrs:{position:"0 100 0",radius:"12",height:"200",color:"#CCCCCC",metalness:"0.5"}}),a("a-cylinder",{attrs:{position:"42 100 -60",radius:"12",height:"200",color:"#CCCCCC",metalness:"0.5"}}),a("a-cylinder",{attrs:{position:"-42 100 -60",radius:"12",height:"200",color:"#CCCCCC",metalness:"0.5"}})],1),a("a-entity",{attrs:{position:"0 "+e.z+" 0"}},[a("a-box",{attrs:{height:"5",width:"130",depth:"140",position:"0 0 -30"}}),a("a-entity",{attrs:{rotation:"0 "+e.a1+" 0",position:"0 10 0"}},[a("a-box",{attrs:{height:"10",width:"50",depth:"140",position:"0 0 70"}}),a("a-cylinder",{attrs:{position:"0 0 0",radius:"25",height:"10"}}),a("a-cylinder",{attrs:{position:"0 0 140",radius:"25",height:"10"}}),a("a-entity",{attrs:{rotation:"0 "+e.a2+" 0",position:"0 10 140"}},[a("a-box",{attrs:{height:"10",width:"50",depth:"140",position:"0 0 70"}}),a("a-cylinder",{attrs:{position:"0 0 0",radius:"25",height:"10"}}),a("a-cylinder",{attrs:{position:"0 0 140",radius:"25",height:"10"}}),a("a-cylinder",{attrs:{position:"0 -80 140",radius:"5",height:"160",color:"black"}})],1)],1)],1),a("a-entity",{attrs:{meshline:"lineWidth: 5; path: "+e.path_str+"; color: #E20049",position:e.x_offset+" 20 "+e.y_offset}}),a("a-plane",{attrs:{position:"0 0 0",rotation:"-90 0 0",width:"400",height:"400",color:"#7BC8A4"}}),a("a-sky",{attrs:{color:"#ECECEC"}}),a("a-entity",{attrs:{camera:"","look-controls":"","orbit-controls":"target: 0 0 0; minDistance: 200; maxDistance: 600; initialPosition: 200 200 200"}})],1),a("br"),a("br"),a("v-slider",{attrs:{label:"Near Arm Angle","thumb-color":"red","thumb-label":"always",min:"-90",max:"90"},model:{value:e.a1,callback:function(t){e.a1=t},expression:"a1"}}),a("v-slider",{attrs:{label:"Far Arm Angle‏‏‎ ‎‎","thumb-color":"red","thumb-label":"always",min:"-90",max:"90"},model:{value:e.a2,callback:function(t){e.a2=t},expression:"a2"}})],1)},$=[],B=(a("fb6a"),a("a9e3"),a("d74a")),U=n["default"].extend({props:{x_offset:Number,y_offset:Number,uploaded_gcode:String},data:function(){return{z:180,a1:0,a2:0,a1_start_angle:0,a2_start_angle:0,a1_len:140,a2_len:140,path:[]}},methods:{gen_path:function(e){e=e.replace(/[N]\d+(?= [^G])/g,"G1"),e=e.replace(/[N]\d+ /g,"");var t=[0,0,0],a=e.split("\n").reduce((function(e,a){var n=B.parseLine(a);if(0===n.words.length)return e;var o=t.slice();for(var r in n.words){var i=n.words[r];"X"===i[0]&&(o[0]=i[1]),"Y"===i[0]&&(o[2]=i[1]),"Z"===i[0]&&(o[1]=i[1])}return t=o,e.push(o),e}),[]);this.path=a}},watch:{uploaded_gcode:function(){this.gen_path(this.uploaded_gcode)}},computed:{path_str:function(){return this.path.reduce((function(e,t){return"".concat(e).concat(""!=e?",":""," ").concat(t[0]," ").concat(t[1]," ").concat(t[2])}),"")},x2:function(){var e=Math.cos((this.a1+this.a1_start_angle)*Math.PI/180)*this.a1_len,t=e+Math.cos((this.a2+this.a2_start_angle)*Math.PI/180)*this.a2_len;return t},y2:function(){var e=Math.sin((this.a1+this.a1_start_angle)*Math.PI/180)*this.a1_len,t=e+Math.sin((this.a2+this.a2_start_angle)*Math.PI/180)*this.a2_len;return t}},mounted:function(){var e=this;this.$nextTick((function(){e.gen_path(e.uploaded_gcode)}))}}),q=U,H=a("ba0d"),W=Object(d["a"])(q,z,$,!1,null,null,null),J=W.exports;h()(W,{VSlider:H["a"]});var Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{width:"300px","max-width":"100%"}},[a("v-text-field",{attrs:{label:"Custom Text"},model:{value:e.userText,callback:function(t){e.userText=t},expression:"userText"}}),a("v-text-field",{attrs:{type:"number",label:"Font Size"},model:{value:e.fontSize,callback:function(t){e.fontSize=e._n(t)},expression:"fontSize"}}),a("v-select",{attrs:{items:e.fontOptions,"item-text":"name","item-value":"file"},model:{value:e.fontName,callback:function(t){e.fontName=t},expression:"fontName"}})],1),a("br"),a("canvas",{staticStyle:{border:"1px solid black"},attrs:{id:"canvas",width:e.plot_width,height:e.plot_height}})])},K=[],ee=(a("a434"),a("a788")),te=a("dbcd"),ae=a.n(te),ne=a("84fa"),oe=a.n(ne),re=n["default"].extend({props:{arm_rad:{default:240,type:Number},x_offset:{default:0,type:Number},y_offset:{default:0,type:Number}},data:function(){return{plot_width:500,plot_height:300,userText:"Jordan Poles",fontName:"GreatVibes-Regular.ttf",fontSize:40,userInputDebounce:0,fontOptions:[{name:"GreatVibes (caligraphy)",file:"GreatVibes-Regular.ttf"},{name:"ChunkFive (block)",file:"ChunkFive-Regular.otf"}]}},watch:{userText:function(){var e=this;clearTimeout(this.userInputDebounce),this.userInputDebounce=setTimeout((function(){return e.textToGcode()}),500)},fontName:function(){var e=this;clearTimeout(this.userInputDebounce),this.userInputDebounce=setTimeout((function(){return e.textToGcode()}),250)},fontSize:function(){var e=this;clearTimeout(this.userInputDebounce),this.userInputDebounce=setTimeout((function(){return e.textToGcode()}),500)},x_offset:function(){var e=this;clearTimeout(this.userInputDebounce),this.userInputDebounce=setTimeout((function(){return e.textToGcode()}),500)},y_offset:function(){var e=this;clearTimeout(this.userInputDebounce),this.userInputDebounce=setTimeout((function(){return e.textToGcode()}),500)}},methods:{textToGcode:function(){var e=this,t=this.arm_rad/2+(this.plot_width-this.arm_rad)/2;ee["a"].load("fonts/".concat(this.fontName),(function(a,n){if(a)alert("Font could not be loaded: "+a);else{var o=n.getPath(e.userText,0,e.fontSize,e.fontSize),r=o.getBoundingBox(),i=r.x2-r.x1,s=o.toPathData(2),c=s.split("Z"),l=10,d="G1Z".concat(l),u="";c.forEach((function(a){var n=oe()(a).unarc().abs(),o=[],r=[],s=[void 0,void 0],c=function(a,n,c,l,d){c-=i/2,0==o.length&&(s=[c,l]),o.push("G1 X".concat(c," Y").concat(l)),r.push("".concat(r.length>0?"L":"M"," ").concat(c+e.x_offset+t," ").concat(l+e.y_offset))},h=new ae.a(c);n.iterate(h.svgPathIterator),o.splice(1,0,"G1Z0"),void 0!=s[0]&&void 0!=s[1]&&o.push("G1X".concat(s[0],"Y").concat(s[1])),o.push("G1Z".concat(l)),d=d+"\n"+o.join("\n"),r.push("Z"),u=u+" "+r.join(" ")})),e.$emit("gcodegen",d);var h=document.getElementById("canvas"),p=h.getContext("2d");p.clearRect(0,0,h.offsetWidth,h.offsetHeight);var f=new Path2D(u);p.stroke(f),p.arc(t,0,e.arm_rad,0,180),p.stroke(),p.beginPath(),p.moveTo(t,0),p.lineTo(t,e.arm_rad),p.closePath(),p.stroke()}}))}},mounted:function(){var e=this;this.$nextTick((function(){e.textToGcode()}))}}),ie=re,se=a("b974"),ce=a("8654"),le=Object(d["a"])(ie,Q,K,!1,null,null,null),de=le.exports;h()(le,{VSelect:se["a"],VTextField:ce["a"]});var ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{width:"300px","max-width":"100%"}},[a("v-file-input",{attrs:{placeholder:"Upload Image",accept:".svg,.png,.jpg,.jpeg"},on:{change:e.load_img_file}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.imageSize[0]+e.imageSize[1]>0,expression:"imageSize[0] + imageSize[1] > 0"}]},[a("div",{staticStyle:{display:"flex"}},[a("canvas",{staticStyle:{border:"1px solid black"},attrs:{id:"svg-canvas",width:"0",height:"0"}}),a("div",{staticStyle:{width:"300px","margin-left":"20px",border:"1px #888 solid","background-color":"lightblue",padding:"16px","border-radius":"10px"}},[a("br"),a("v-slider",{attrs:{"thumb-label":"always",min:"0",max:"200",label:"GCode Scaler %"},on:{change:e.svgToGcode},model:{value:e.gcodeScale,callback:function(t){e.gcodeScale=t},expression:"gcodeScale"}}),"photo"==e.imageType?a("div",[a("br"),a("v-slider",{attrs:{"thumb-label":"always",min:"-1",max:"255",label:"Threshold"},on:{change:e.photoToSVG},scopedSlots:e._u([{key:"append",fn:function(){return[a("v-icon",{directives:[{name:"ripple",rawName:"v-ripple"},{name:"show",rawName:"v-show",value:-1!=e.potraceParams.threshold,expression:"potraceParams.threshold != -1"}],on:{click:function(t){e.potraceParams.threshold=-1}}},[e._v(" mdi-replay ")])]},proxy:!0}],null,!1,3891612062),model:{value:e.potraceParams.threshold,callback:function(t){e.$set(e.potraceParams,"threshold",t)},expression:"potraceParams.threshold"}}),a("br"),a("v-slider",{attrs:{"thumb-label":"always",min:"0",max:"50",label:"Min Speckle Size"},on:{change:e.photoToSVG},model:{value:e.potraceParams.turdSize,callback:function(t){e.$set(e.potraceParams,"turdSize",t)},expression:"potraceParams.turdSize"}}),a("br"),a("v-checkbox",{attrs:{label:"Invert"},on:{change:e.photoToSVG},model:{value:e.potraceParams.blackOnWhite,callback:function(t){e.$set(e.potraceParams,"blackOnWhite",t)},expression:"potraceParams.blackOnWhite"}})],1):e._e()],1)]),e._v(" Print Size: "+e._s((e.imageSize[0]*e.gcodeScale/100).toFixed(1))+" x "+e._s((e.imageSize[1]*e.gcodeScale/100).toFixed(1))+" mm ")])])},he=[],pe=(a("a630"),a("3ca3"),Math.PI),fe=2*pe,ve={approximationScale:1,curve_distance_epsilon:1e-30,curveColinearityEpsilon:1e-30,curveAngleToleranceEpsilon:.01,angleTolerance:.4,recursionLimit:32,cuspLimit:0},_e=function(){function e(t,a){var n=this;Object(L["a"])(this,e),this.svgPathIterator=function(e,t,a,o){var r,i,s,c,l,d,u,h,p,f=e[0],v=!1;switch(f){case"M":for(r=1;r<e.length;r+=2)i=e[r],s=e[r+1],n.consumer(a,o,i,s,t,["M",i,s]),a=i,o=s;break;case"L":for(r=1;r<e.length;r+=2)i=e[r],s=e[r+1],n.consumer(a,o,i,s,t,["L",i,s]),a=i,o=s;break;case"H":for(s=o,r=1;r<e.length;r+=2)i=e[r],n.consumer(a,o,i,s,t,["H",i]),a=i;break;case"V":for(i=a,r=1;r<e.length;r+=2)s=e[r],n.consumer(a,o,i,s,t,["V",s]),o=s;break;case"Z":n.consumer(a,o,a,o,t,["Z"]);break;case"Q":v=!0;case"C":var _=v?4:6;for(r=1;r<e.length;r+=_)i=a,s=o,c=e[r],l=e[r+1],d=v?c:e[r+2],u=v?l:e[r+3],h=v?e[r+2]:e[r+4],p=v?e[r+3]:e[r+5],n.linearize(i,s,c,l,d,u,h,p,t),a=i,o=s;break;default:throw new Error("path command '"+f+"' not supported yet")}},this.consumer=function(e,a,o,r,i,s){t(e,a,o,r,i,s),n.prevX=o,n.prevY=r},this.opts=Object.assign({},ve,a),this.prevX=0,this.prevY=0}return Object(A["a"])(e,[{key:"linearize",value:function(e,t,a,n,o,r,i,s,c){this.linearizeRecursive(e,t,a,n,o,r,i,s,c,0);var l=this.prevX,d=this.prevY;l===i&&d===s||this.consumer(l,d,i,s,c,["L",i,s])}},{key:"distanceTo",value:function(e,t,a,n){var o=a-e,r=n-t;return Math.sqrt(o*o+r*r)}},{key:"linearizeRecursive",value:function(e,t,a,n,o,r,i,s,c,l){var d,u,h,p=this.opts.cuspLimit,f=this.opts.curveColinearityEpsilon,v=this.opts.curveAngleToleranceEpsilon,_=this.opts.angleTolerance,g=Math.pow(.5/this.opts.approximationScale,2),m=(e+a)/2,b=(t+n)/2,w=(a+o)/2,x=(n+r)/2,y=(o+i)/2,k=(r+s)/2,S=(m+w)/2,M=(b+x)/2,G=(w+y)/2,C=(x+k)/2,j=(S+G)/2,O=(M+C)/2,T=i-e,E=s-t,Y=Math.abs((a-i)*E-(n-s)*T),R=Math.abs((o-i)*E-(r-s)*T);switch((Y>f?2:0)+(R>f?1:0)){case 0:if(h=T*T+E*E,0===h)Y=this.distanceTo(e,t,a,n),R=this.distanceTo(i,s,o,r);else{if(h=1/h,d=a-e,u=n-t,Y=h*(d*T+u*E),d=o-e,u=r-t,R=h*(d*T+u*E),Y>0&&Y<1&&R>0&&R<1)return void this.consumer(e,t,i,s,c,["L",i,s]);Y=Y<=0?this.distanceTo(a,n,e,t):Y>=1?this.distanceTo(a,n,i,s):this.distanceTo(a,n,e+Y*T,t+Y*E),R=R<=0?this.distanceTo(o,r,e,t):R>=1?this.distanceTo(o,r,i,s):this.distanceTo(o,r,e+R*T,t+R*E)}if(Y>R){if(Y<g)return void this.consumer(e,t,a,n,c,["L",a,n])}else if(R<g)return void this.consumer(e,t,o,r,c,["L",o,r]);break;case 1:if(R*R<=g*(T*T+E*E)){if(_<v)return void this.consumer(e,t,w,x,c,["L",w,x]);if(d=Math.abs(Math.atan2(s-r,i-o)-Math.atan2(r-n,o-a)),d>=pe&&(d=fe-d),d<_)return this.consumer(e,t,a,n,c,["L",a,n]),void this.consumer(a,n,o,r,c,["L",o,r]);if(0!==p&&d>pe-p)return void this.consumer(e,t,o,r,c,["L",o,r])}break;case 2:if(Y*Y<=g*(T*T+E*E)){if(_<v)return void this.consumer(e,t,w,x,c,["L",w,x]);if(d=Math.abs(Math.atan2(r-n,o-a)-Math.atan2(n-t,a-e)),d>=pe&&(d=fe-d),d<_)return this.consumer(e,t,a,n,c,["L",a,n]),void this.consumer(a,n,o,r,c,["L",o,r]);if(0!==p&&d>pe-p)return void this.consumer(e,t,a,n,c,["L",a,n])}break;case 3:if((Y+R)*(Y+R)<=g*(T*T+E*E)){if(_<v)return void this.consumer(e,t,w,x,c,["L",w,x]);if(h=Math.atan2(r-n,o-a),d=Math.abs(h-Math.atan2(n-t,a-e)),u=Math.abs(Math.atan2(s-r,i-o)-h),d>=pe&&(d=fe-d),u>=pe&&(u=fe-u),d+u<_)return void this.consumer(e,t,w,x,c,["L",w,x]);if(0!==p){if(d>pe-p)return void this.consumer(e,t,a,n,c,["L",a,n]);if(u>pe-p)return void this.consumer(e,t,o,r,c,["L",o,r])}}break}var X=l+1;X>=this.opts.recursionLimit?this.consumer(e,t,i,s,c,["L",i,s]):(this.linearizeRecursive(e,t,m,b,S,M,j,O,c,X),this.linearizeRecursive(j,O,G,C,y,k,i,s,c,X))}}]),e}(),ge=a("cd7e"),me=a.n(ge),be=a("f46b"),we=n["default"].extend({data:function(){return{imageSize:[0,0],rawPhoto:void 0,rawSVG:"",imageType:"",gcodeScale:25,potraceParams:{threshold:-1,turdSize:15,blackOnWhite:!0},finalGcode:""}},methods:{load_img_file:function(e){var t=this;if(null!==e){var a=new FileReader;["image/jpeg","image/jpg","image/png"].includes(e.type)?(a.onload=function(e){t.imageType="photo",t.rawPhoto=a.result,t.photoToSVG()},Object(be["a"])().toBlob(e,{max:400}).then((function(e){return a.readAsArrayBuffer(e)}))):"image/svg+xml"==e.type?(a.onload=function(e){t.rawSVG=a.result,t.svgToGcode()},a.readAsText(e)):this.imageType=""}},photoToSVG:function(){var e=this;void 0!=this.rawPhoto&&me.a.trace(this.rawPhoto,this.potraceParams,(function(t,a){if(t)throw t;e.rawSVG=a,e.svgToGcode()}))},svgToGcode:function(){var e=this,t=(new DOMParser).parseFromString(this.rawSVG,"image/svg+xml"),a=Array.from(t.querySelectorAll("path").values()).reduce((function(e,t){var a=t.getAttribute("d");return e.push(a),e}),[]),n=5,o="",r="",i=[0,0],s=[0,0];a.forEach((function(t){var a=oe()(t).unarc().abs(),c=[],l=[],d=function(t,a,o,r,d,u){o>i[0]&&(i[0]=o),r>i[1]&&(i[1]=r),o=o*e.gcodeScale/100,r=r*e.gcodeScale/100,"M"==u[0]?(c.push(["G0","Z".concat(n)]),c.push(["G0","X".concat(o),"Y".concat(r)]),c.push(["G0","Z0"]),s=[o,r]):"Z"==u[0]?c.push(["G0","X".concat(s[0]),"Y".concat(s[1])]):c.push(["G1","X".concat(o),"Y".concat(r)]),l.push(u.join(" "))},u=new _e(d,{recursionLimit:4,curve_distance_epsilon:1e-5,curveColinearityEpsilon:1e-5});a.iterate(u.svgPathIterator),o=o+"\n"+c.map((function(e){return e.join("")})).join("\n"),r=r+" "+l.join(" ")}));var c=document.getElementById("svg-canvas");this.imageSize=i,c.setAttribute("width","".concat(i[0])),c.setAttribute("height","".concat(i[1]));var l=c.getContext("2d");l.clearRect(0,0,c.offsetWidth,c.offsetHeight);var d=new Path2D(r);l.stroke(d),this.$emit("gcodegen",o)}}}),xe=we,ye=a("ac7c"),ke=a("23a7"),Se=a("269a"),Me=a.n(Se),Ge=a("5607"),Ce=Object(d["a"])(xe,ue,he,!1,null,null,null),je=Ce.exports;h()(Ce,{VCheckbox:ye["a"],VFileInput:ke["a"],VIcon:f["a"],VSlider:H["a"]}),Me()(Ce,{Ripple:Ge["a"]});var Oe=a("9e3e"),Te=new R,Ee=n["default"].extend({components:{ScaraSim3D:J,TextToGcode:de,ImgToGcode:je},data:function(){var e=this;return{raw_gcode:"",send_buffer:[],ready_to_send:!0,last_resp:void 0,send_buffer_interval:void 0,converted_gcode:[],scara_conv:new N((function(t){e.$toast(t,{x:"center",color:"red"})})),send_log:[],send_log_index:0,recv_buffer:"",serial_log:[],cmd:"",jog_inc:{x:10,y:10,z:10},goto:{x:0,y:0},serial_connected:!1,attempting_to_connect:!1,cancel_connect:!1,reader:void 0,writer:void 0,regen_debounce:0}},watch:{"scara_conv.x_offset":function(){clearTimeout(this.regen_debounce),this.regen_debounce=setTimeout(this.regen_converted_gcode,500)},"scara_conv.y_offset":function(){clearTimeout(this.regen_debounce),this.regen_debounce=setTimeout(this.regen_converted_gcode,500)}},methods:{goto_point:function(){var e,t;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return e="G1 X".concat(this.goto.x," Y").concat(this.goto.y," F20000\n"),t=this.scara_conv.convert_cartesian_to_scara(e),a.next=4,regeneratorRuntime.awrap(this.write_serial(t+"\n"));case 4:case"end":return a.stop()}}),null,this)},home_scara:function(){var e,t,a,n,o,r,i=arguments;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:e=i.length>0&&void 0!==i[0]&&i[0],t=["G0 Z30 F5000","G92 X0 Y0","G0 Y25","G28 X","G28 Y","G0 Y-30","G0 X-10","G92 X0 Y0"],a=["G0 Z30 F5000","G92 X0 Y0","G0 Y30","G28 X","G28 Y","G0 Y-".concat(this.scara_conv.scara_props.y_estop_offset+90),"G0 X-".concat(this.scara_conv.scara_props.x_estop_offset),"G0 Y-".concat(this.scara_conv.scara_props.y_estop_offset+180),"G92 X0 Y0","G1 Z0 F5000"],n=e?t:a,s.t0=regeneratorRuntime.keys(n);case 5:if((s.t1=s.t0()).done){s.next=12;break}return o=s.t1.value,r=n[o],s.next=10,regeneratorRuntime.awrap(this.write_serial(r+"\n"));case 10:s.next=5;break;case 12:case"end":return s.stop()}}),null,this)},origin_scara:function(){var e,t,a;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:e=["G0 Z30 F5000","G0 X0 Y0 F5000","G0 Z0 F5000"],n.t0=regeneratorRuntime.keys(e);case 2:if((n.t1=n.t0()).done){n.next=9;break}return t=n.t1.value,a=e[t],n.next=7,regeneratorRuntime.awrap(this.write_serial(a+"\n"));case 7:n.next=2;break;case 9:case"end":return n.stop()}}),null,this)},recover_prev_cmd:function(e){this.cmd==this.send_log[this.send_log_index]?(this.send_log_index+=e,this.send_log_index<this.send_log.length&&(this.cmd=this.send_log[this.send_log_index])):this.send_log.length>0&&(this.send_log_index=0,this.cmd=this.send_log[this.send_log_index])},write_cmd_to_serial:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.write_serial(this.cmd+"\n"));case 2:this.send_log.unshift(this.cmd),this.cmd="";case 4:case"end":return e.stop()}}),null,this)},write_serial:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:Te.postMessage({type:j.PushToBuffer,data:e});case 1:case"end":return t.stop()}}))},serial_connect:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:Te.postMessage({type:j.SerialConnect});case 1:case"end":return e.stop()}}))},regen_converted_gcode:function(){this.converted_gcode=this.scara_conv.convert_cartesian_to_scara(this.raw_gcode).split("\n")},load_gcode_file:function(e){var t=this;if(null!==e){var a=new FileReader;a.onload=function(e){t.raw_gcode=e.target.result,t.regen_converted_gcode()},a.readAsText(e)}},gcode_from_text:function(e){this.raw_gcode=e,this.regen_converted_gcode(),this.converted_gcode=this.converted_gcode.concat(["G0Z30","G0X0Y0","G0Z0"])},save_gcode:function(e){Object(Oe["a"])(new Blob([e],{type:"text/plain"}),"jscara_export.gcode")},clear_buffer:function(){Te.postMessage({type:j.ClearBuffer}),this.ready_to_send=!0},send_converted_gcode:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:Te.postMessage({type:j.PushToBuffer,data:this.converted_gcode});case 1:case"end":return e.stop()}}),null,this)}},mounted:function(){var e=this;if(void 0!==navigator.serial){var t=document.getElementById("notSupported");t.style.display="none"}Te.onmessage=function(t){var a=t.data;a.type==O.SerialConnected?e.serial_connected=!0:a.type==O.SerialRecv?e.serial_log.unshift(a.data):a.type==O.SerialError&&e.$toast(a.data,{x:"center",color:"red"})}}}),Ye=Ee,Re=(a("cccb"),a("cd55")),Xe=a("49e2"),Pe=a("c865"),Le=a("0393"),Ae=a("0fd9"),Ze=Object(d["a"])(Ye,E,Y,!1,null,null,null),Fe=Ze.exports;h()(Ze,{VBtn:p["a"],VExpansionPanel:Re["a"],VExpansionPanelContent:Xe["a"],VExpansionPanelHeader:Pe["a"],VExpansionPanels:Le["a"],VFileInput:ke["a"],VRow:Ae["a"],VTextField:ce["a"]});var De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"scara-converter"}},[a("v-file-input",{on:{change:e.load_gcode_file}})],1)},Ie=[],Ve=(a("b0c0"),n["default"].extend({data:function(){return{scara:new N}},methods:{download_gcode:function(e,t){var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)},load_gcode_file:function(e){var t=this,a=new FileReader;a.onload=function(a){t.download_gcode("".concat(e.name.replace(".gcode","").replace(".nc",""),"_converted.gcode"),t.scara.convert_cartesian_to_scara(a.target.result))},a.readAsText(e)}},mounted:function(){}})),Ne=Ve,ze=(a("b396"),Object(d["a"])(Ne,De,Ie,!1,null,"56b51dc2",null)),$e=ze.exports;h()(ze,{VFileInput:ke["a"]});var Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-slider",{staticStyle:{padding:"10px 24px"},attrs:{min:"-80",max:"80","thumb-label":"",label:"Arm 1 Angle:"},on:{input:e.plotScara},model:{value:e.a1,callback:function(t){e.a1=t},expression:"a1"}}),a("v-slider",{staticStyle:{padding:"10px 24px"},attrs:{min:"-80",max:"80","thumb-label":"",label:"Arm 2 Angle:"},on:{input:e.plotScara},model:{value:e.a2,callback:function(t){e.a2=t},expression:"a2"}}),a("div",{staticStyle:{border:"1px dotted #222"}},[a("svg",{attrs:{width:e.width,height:e.height}})])],1)},Ue=[],qe=Object.assign({},a("fd32"),a("f1df"),a("ce24"),a("4611"),a("bc17"),a("a1eb")),He=n["default"].extend({data:function(){return{a1:0,a2:0,width:500,height:500,padding:{top:30,right:30,bottom:60,left:60},plot_area:{width:400,height:400}}},methods:{plotScara:function(){var e=qe.select(this.$el).select("svg");if(e.selectAll("*").remove(),void 0!==e){var t=e.append("g");t.attr("width",this.width-this.padding.left-this.padding.right).attr("height",this.height-this.padding.top-this.padding.bottom).attr("transform","translate("+this.padding.left+","+this.padding.top+")").attr("class","davenport-plot-area");var a=qe.scaleLinear().domain([0,this.plot_area.width]).range([0,this.width-this.padding.left-this.padding.right]);t.append("g").attr("transform","translate(0,"+(this.height-this.padding.bottom-10)+")").call(qe.axisBottom(a));var n=qe.scaleLinear().domain([0,this.plot_area.height]).range([this.height-this.padding.top-this.padding.bottom,0]);t.append("g").call(qe.axisLeft().scale(n));var o=90,r=90,i=this.plot_area.width/2+Math.cos((this.a1+o)*Math.PI/180)*V.L1,s=Math.sin((this.a1+o)*Math.PI/180)*V.L1;t.append("line").attr("x1",a(this.plot_area.width/2)).attr("x2",a(i)).attr("y1",n(0)).attr("y2",n(s)).attr("stroke","coral").attr("stroke-width",20).attr("stroke-linecap","round");var c=i+Math.cos((this.a2+r)*Math.PI/180)*V.L2,l=s+Math.sin((this.a2+r)*Math.PI/180)*V.L2;t.append("line").attr("x1",a(i)).attr("x2",a(c)).attr("y1",n(s)).attr("y2",n(l)).attr("stroke","teal").attr("stroke-width",20).attr("stroke-linecap","round")}}},mounted:function(){var e=this;this.$nextTick((function(){e.plotScara()}))}}),We=He,Je=Object(d["a"])(We,Be,Ue,!1,null,null,null),Qe=Je.exports;h()(Je,{VSlider:H["a"]}),n["default"].use(T["a"]);var Ke=[{path:"/",name:"home",component:Fe},{path:"/scara",name:"SCARA",component:$e},{path:"/sim",name:"sim",component:Qe}],et=new T["a"]({mode:"history",base:"/jscara-console/",routes:Ke}),tt=et,at=a("2f62");n["default"].use(at["a"]);var nt=new at["a"].Store({state:{},mutations:{},actions:{},modules:{}}),ot=a("9483");Object(ot["a"])("".concat("/jscara-console/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var rt=a("ce5b"),it=a.n(rt),st=(a("bf40"),a("87f6")),ct=a.n(st);n["default"].use(it.a),n["default"].use(ct.a,{showClose:!1,color:"#403e4d"});var lt={},dt=new it.a(lt);n["default"].config.productionTip=!1,n["default"].config.ignoredElements=["a-scene","a-assets","a-sky","a-camera","a-cursor","a-animation","a-entity","a-box","a-cylinder","a-plane"],new n["default"]({router:tt,store:nt,vuetify:dt,render:function(e){return e(C)}}).$mount("#app")}});
//# sourceMappingURL=app.c406a6ed.js.map