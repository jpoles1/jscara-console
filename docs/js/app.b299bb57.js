(function(e){function t(t){for(var a,i,s=t[0],c=t[1],l=t[2],u=0,h=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&h.push(o[i][0]),o[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(h.length)h.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(a=!1)}a&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},o={app:0},r=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/jscara-console/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=c;r.push([1,"chunk-vendors"]),n()})({0:function(e,t){},"034f":function(e,t,n){"use strict";var a=n("8a23"),o=n.n(a);o.a},1:function(e,t,n){e.exports=n("cd49")},2:function(e,t){},3:function(e,t){},"3ab7":function(e,t,n){"use strict";var a=n("4a7e"),o=n.n(a);o.a},4230:function(e,t,n){},"4a7e":function(e,t,n){},"8a23":function(e,t,n){},"8c83":function(e,t,n){},"9e3e":function(e,t,n){"use strict";(function(e){n("b0c0"),n("ac1f"),n("5319");var a=n("53ca"),o="object"===("undefined"===typeof window?"undefined":Object(a["a"])(window))&&window.window===window?window:"object"===("undefined"===typeof self?"undefined":Object(a["a"])(self))&&self.self===self?self:"object"===("undefined"===typeof e?"undefined":Object(a["a"])(e))&&e.global===e?e:void 0;function r(e,t){return"undefined"===typeof t?t={autoBom:!1}:"object"!==Object(a["a"])(t)&&(t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}function i(e,t,n){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){d(a.response,t,n)},a.onerror=function(){alert("Error: could not download file!")},a.send()}function s(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(n){}return t.status>=200&&t.status<=299}function c(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var l=/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d="object"!==("undefined"===typeof window?"undefined":Object(a["a"])(window))||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(e,t,n){var a=o.URL||o.webkitURL,r=document.createElement("a");t=t||e.name||"download",r.download=t,r.rel="noopener","string"===typeof e?(r.href=e,r.origin!==location.origin?s(r.href)?i(e,t,n):c(r,r.target="_blank"):c(r)):(r.href=a.createObjectURL(e),setTimeout((function(){a.revokeObjectURL(r.href)}),4e4),setTimeout((function(){c(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"===typeof e)if(s(e))i(e,t,n);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){c(a)}))}else navigator.msSaveOrOpenBlob(r(e,n),t)}:function(e,t,n,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),"string"===typeof e)return i(e,t,n);var r="application/octet-stream"===e.type,s=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||r&&s||l)&&"undefined"!==typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},d.readAsDataURL(e)}else{var u=o.URL||o.webkitURL,h=u.createObjectURL(e);a?a.location=h:location.href=h,a=null,setTimeout((function(){u.revokeObjectURL(h)}),4e4)}};t["a"]=d}).call(this,n("c8ba"))},b396:function(e,t,n){"use strict";var a=n("8c83"),o=n.n(a);o.a},cccb:function(e,t,n){"use strict";var a=n("4230"),o=n.n(a);o.a},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:""}},[n("Header"),n("v-content",{staticStyle:{"margin-top":"20px"}},[n("router-view")],1),n("Footer")],1)},r=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.$vuetify.breakpoint.xsOnly?n("v-navigation-drawer",{attrs:{clipped:"","mobile-break-point":"600",width:"180"},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{attrs:{shaped:""}},e._l(e.navList,(function(t,a){return n("v-list-tile",{key:a,attrs:{to:t.url,draggable:!1},on:{click:function(t){e.drawer=!1}}},[t.icon?n("v-list-tile-action",{staticStyle:{"margin-right":"0px"}},[n("v-icon",[e._v(e._s(t.icon||"grip-lines"))])],1):e._e(),n("v-list-tile-content",[n("v-list-tile-title",{staticStyle:{"font-size":"120%"}},[e._v(" "+e._s(t.name)+" ")])],1)],1)})),1)],1):e._e(),n("v-toolbar",[e.$vuetify.breakpoint.xsOnly?n("span",[n("div",{on:{click:function(t){e.drawer=!e.drawer}}},[n("v-icon",[e._v("fa-bars")])],1)]):e._e(),n("v-toolbar-title",{staticClass:"headline"},[n("router-link",{staticClass:"header-logo",staticStyle:{"text-decoration":"none"},attrs:{to:"/"}},[n("span",[e._v("JSCARA")])])],1),e.$vuetify.breakpoint.smAndUp?n("v-spacer"):e._e(),e.$vuetify.breakpoint.smAndUp?n("span",e._l(e.navList,(function(t,a){return n("v-btn",{key:a,staticClass:"header-nav",attrs:{to:t.url}},[n("span",{staticClass:"mr-2"},[e._v(e._s(t.name))]),n("v-icon",[e._v("fas "+e._s(t.icon))])],1)})),1):e._e()],1)],1)},s=[],c=a["default"].extend({data:function(){return{drawer:!1}},computed:{navList:function(){var e=[];return e}}}),l=c,d=(n("3ab7"),n("2877")),u=n("6544"),h=n.n(u),p=n("8336"),f=n("132d"),v=n("8860"),_=n("f774"),g=n("2fa4"),m=n("71d9"),b=n("2a7f"),w=Object(d["a"])(l,i,s,!1,null,"71fb3f7b",null),x=w.exports;h()(w,{VBtn:p["a"],VIcon:f["a"],VList:v["a"],VNavigationDrawer:_["a"],VSpacer:g["a"],VToolbar:m["a"],VToolbarTitle:b["a"]});var y=a["default"].extend({name:"App",components:{Header:x}}),k=y,S=(n("034f"),n("7496")),M=n("a75b"),C=Object(d["a"])(k,o,r,!1,null,null,null),j=C.exports;h()(C,{VApp:S["a"],VContent:M["a"]});var T,O,G=n("8c4f"),E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-left":"24px"},attrs:{id:"serial-pane"}},[e._m(0),e.serial_connected?n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("v-text-field",{staticStyle:{"max-width":"500px","margin-right":"30px"},attrs:{label:"GCODE Command",outlined:"",autocomplete:"off"},nativeOn:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.write_cmd_to_serial(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.recover_prev_cmd(1)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.recover_prev_cmd(-1)}]},model:{value:e.cmd,callback:function(t){e.cmd=t},expression:"cmd"}}),n("v-btn",{staticStyle:{transform:"scale(1.2)"},on:{click:e.write_cmd_to_serial}},[e._v(" Send ")])],1):n("div",[e.attempting_to_connect?n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.cancel_connect=!0}}},[e._v(" Cancel Connect to SCARA ")]):n("v-btn",{attrs:{color:"primary"},on:{click:e.serial_connect}},[e._v(" Connect to SCARA ")])],1),e.serial_connected?n("div",[n("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:e.origin_scara}},[e._v(" Origin ")]),n("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:function(t){return e.write_serial("G92 X0 Y0\n")}}},[e._v(" XY=0 ")]),n("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:function(t){return e.write_serial("G92 Z0\n")}}},[e._v(" Z=0 ")]),n("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:function(t){return e.write_serial("G92 X0 Y0 Z0\n")}}},[e._v(" XYZ=0 ")]),n("br"),n("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:e.clear_buffer}},[e._v(" Clear Buffer ")]),n("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:function(t){e.write_serial("M410\n"),e.ready_to_send=!0}}},[e._v(" Quickstop ")]),n("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:function(t){return e.write_serial("M112\n")}}},[e._v(" E-Stop ")]),n("br"),n("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:function(t){return e.home_scara()}}},[e._v(" Home ")]),n("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:function(t){return e.home_scara(!0)}}},[e._v(" Fold-Up ")]),n("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:function(t){return e.write_serial("M18\n")}}},[e._v(" Release ")]),n("br"),n("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:function(t){return e.write_serial("M106 S255\n")}}},[e._v(" Suck On ")]),n("v-btn",{staticStyle:{transform:"scale(0.85)"},on:{click:function(t){return e.write_serial("M106 S0\n")}}},[e._v(" Suck Off ")]),n("div",{staticStyle:{display:"flex","align-items":"stretch"}},[n("div",{staticClass:"jog-box"},[n("div",{staticClass:"jog-col"},[n("v-text-field",{staticStyle:{"text-align":"center"},attrs:{type:"number",step:"5"},model:{value:e.jog_inc["x"],callback:function(t){e.$set(e.jog_inc,"x",e._n(t))},expression:"jog_inc['x']"}}),n("v-btn",{staticClass:"jog-btn",on:{click:function(t){return e.write_serial("G91\nG0 X"+e.jog_inc["x"]+"\nG90\n")}}},[e._v(" +X ")]),n("v-btn",{staticClass:"jog-btn",on:{click:function(t){return e.write_serial("G91\nG0 X-"+e.jog_inc["x"]+"\nG90\n")}}},[e._v(" -X ")])],1),n("div",{staticClass:"jog-col"},[n("v-text-field",{staticStyle:{"text-align":"center"},attrs:{type:"number",step:"5"},model:{value:e.jog_inc["y"],callback:function(t){e.$set(e.jog_inc,"y",e._n(t))},expression:"jog_inc['y']"}}),n("v-btn",{staticClass:"jog-btn",on:{click:function(t){return e.write_serial("G91\nG0 Y"+e.jog_inc["y"]+"\nG90\n")}}},[e._v(" +Y ")]),n("v-btn",{staticClass:"jog-btn",on:{click:function(t){return e.write_serial("G91\nG0 Y-"+e.jog_inc["y"]+"\nG90\n")}}},[e._v(" -Y ")])],1),n("div",{staticClass:"jog-col"},[n("v-text-field",{staticStyle:{"text-align":"center"},attrs:{type:"number",step:"5"},model:{value:e.jog_inc["z"],callback:function(t){e.$set(e.jog_inc,"z",e._n(t))},expression:"jog_inc['z']"}}),n("v-btn",{staticClass:"jog-btn",on:{click:function(t){e.write_serial("G91\nG0 Z"+Math.max(1,e.jog_inc["z"])+"\nG90\n")}}},[e._v(" +Z ")]),n("v-btn",{staticClass:"jog-btn",on:{click:function(t){e.write_serial("G91\nG0 Z-"+Math.max(1,e.jog_inc["z"])+"\nG90\n")}}},[e._v(" -Z ")])],1)]),n("div",{staticStyle:{width:"240px",margin:"10px 20px",padding:"16px 30px","background-color":"#ffb8b8","border-radius":"10px",display:"flex","align-items":"center","justify-content":"center","flex-direction":"column"}},[n("v-row",[n("v-text-field",{staticStyle:{width:"100px"},attrs:{type:"number",label:"X Position"},model:{value:e.goto.x,callback:function(t){e.$set(e.goto,"x",e._n(t))},expression:"goto.x"}}),n("div"),n("v-text-field",{staticStyle:{width:"100px"},attrs:{type:"number",label:"Y Position"},model:{value:e.goto.y,callback:function(t){e.$set(e.goto,"y",e._n(t))},expression:"goto.y"}})],1),n("v-row",{attrs:{justify:"center"}},[n("v-btn",{on:{click:e.goto_point}},[e._v("Go To")])],1)],1),n("ClickToMove",{on:{move:e.click_move}})],1),n("v-text-field",{staticStyle:{width:"100px"},attrs:{type:"number",label:"X Offset"},model:{value:e.scara_conv.x_offset,callback:function(t){e.$set(e.scara_conv,"x_offset",e._n(t))},expression:"scara_conv.x_offset"}}),n("v-text-field",{staticStyle:{width:"100px"},attrs:{type:"number",label:"Y Offset"},model:{value:e.scara_conv.y_offset,callback:function(t){e.$set(e.scara_conv,"y_offset",e._n(t))},expression:"scara_conv.y_offset"}})],1):e._e(),n("div",{staticStyle:{"margin-top":"14px","min-height":"20vh","max-height":"30vh",width:"90%","overflow-y":"scroll",border:"1px dotted #333"}},e._l(e.serial_log,(function(t,a){return n("span",{key:a,domProps:{innerHTML:e._s(t)}})})),0),n("v-expansion-panels",[n("v-expansion-panel",[n("v-expansion-panel-header",{attrs:{color:"#333"}},[e._v(" Text 🢂 SCARA ")]),n("v-expansion-panel-content",[n("TextToGcode",{attrs:{x_offset:e.scara_conv.x_offset,y_offset:e.scara_conv.y_offset},on:{gcodegen:e.gcode_from_text}}),n("br"),e.converted_gcode.length>0?n("v-btn",{on:{click:e.send_converted_gcode}},[e._v(" Send Converted GCODE ")]):e._e(),e.raw_gcode.length>0?n("v-btn",{on:{click:e.regen_converted_gcode}},[e._v(" Regen SCARA GCODE ")]):e._e(),e.converted_gcode.length>0?n("v-btn",{on:{click:function(t){e.save_gcode(e.converted_gcode.join("\n"))}}},[e._v(" Save Converted GCODE ")]):e._e()],1)],1),n("v-expansion-panel",[n("v-expansion-panel-header",{attrs:{color:"#333"}},[e._v(" Image 🢂 SCARA ")]),n("v-expansion-panel-content",[n("ImgToGcode",{on:{gcodegen:e.gcode_from_text}}),n("br"),e.converted_gcode.length>0?n("v-btn",{on:{click:e.send_converted_gcode}},[e._v(" Send Converted GCODE ")]):e._e(),e.raw_gcode.length>0?n("v-btn",{on:{click:e.regen_converted_gcode}},[e._v(" Regen SCARA GCODE ")]):e._e(),e.converted_gcode.length>0?n("v-btn",{on:{click:function(t){return e.save_gcode(e.raw_gcode)}}},[e._v(" Save Raw GCODE ")]):e._e()],1)],1),n("v-expansion-panel",[n("v-expansion-panel-header",[e._v(" GCode Uploader ")]),n("v-expansion-panel-content",[n("v-file-input",{attrs:{placeholder:"Upload Cartesian GCODE"},on:{change:e.load_gcode_file}}),n("br"),e.converted_gcode.length>0?n("v-btn",{on:{click:e.send_converted_gcode}},[e._v(" Send Converted GCODE ")]):e._e(),e.raw_gcode.length>0?n("v-btn",{on:{click:e.regen_converted_gcode}},[e._v(" Regen SCARA GCODE ")]):e._e()],1)],1),n("v-expansion-panel",[n("v-expansion-panel-header",[e._v(" SCARA Sim ")]),n("v-expansion-panel-content",[n("ScaraSim3D",{attrs:{uploaded_gcode:this.raw_gcode,x_offset:e.scara_conv.x_offset,y_offset:e.scara_conv.y_offset}})],1)],1)],1)],1)},R=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"notSupported"}},[e._v(" Sorry, "),n("b",[e._v("Web Serial")]),e._v(" is not supported on this device, make sure you're running Chrome 78 or later and have enabled the "),n("code",[e._v("#enable-experimental-web-platform-features")]),e._v(" flag in "),n("code",[e._v("chrome://flags")])])}],P=(n("99af"),n("d3b7"),n("ac1f"),n("1276"),n("ddb0"),n("3835"));n("96cf");function L(){return new Worker(n.p+"js/serialworker.ae259338.worker.js")}(function(e){e[e["SerialConnect"]=0]="SerialConnect",e[e["PushToBuffer"]=1]="PushToBuffer",e[e["ReplaceBuffer"]=2]="ReplaceBuffer",e[e["ClearBuffer"]=3]="ClearBuffer"})(T||(T={})),function(e){e[e["SerialConnected"]=0]="SerialConnected",e[e["SerialError"]=1]="SerialError",e[e["SerialRecv"]=2]="SerialRecv"}(O||(O={}));n("a4d3"),n("cb29"),n("4de4"),n("4160"),n("caad"),n("a15b"),n("d81d"),n("13d5"),n("4057"),n("b680"),n("e439"),n("dbb4"),n("b64b"),n("acd8"),n("5319"),n("159b");var A=n("ade3"),X=n("d4ec"),Y=n("bee2");function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){Object(A["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z,D=n("d74a");(function(e){e[e["Left"]=-1]="Left",e[e["Right"]=1]="Right"})(Z||(Z={}));var I={L1:120,L2:120,a1_driver_teeth:20,a1_receiver_teeth:80,a1_steps_per_rev:50,a2_driver_teeth:20,a2_receiver_teeth:80,a2_secondary_receiver_teeth:80,a2_steps_per_rev:50,max_speed:2e4,x_estop_offset:185,y_estop_offset:115},V=function(){function e(t){Object(X["a"])(this,e),this.last_hand=Z.Right,this.x_offset=0,this.y_offset=100,this.inner_rad=0,this.skew=0,this.feed_rate=2e3,this.pref_hand=Z.Right,this.max_seg_length=.1,this.scara_props=I,this.error_reporter=t||function(e){alert&&alert(e)}}return Object(Y["a"])(e,[{key:"valid_point",value:function(e,t){return t<=Math.sqrt(Math.pow(this.scara_props.L1+this.scara_props.L2,2)-Math.pow(e,2))}},{key:"parse_gcode_move",value:function(e){var t={X:void 0,Y:void 0,Z:void 0,F:void 0,E:void 0};for(var n in e){var a=e[n];"X"===a[0]&&(t.X=a[1]),"Y"===a[0]&&(t.Y=a[1]),"Z"===a[0]&&(t.Z=a[1]),"E"===a[0]&&(t.E=a[1]),"F"===a[0]&&(t.F=a[1])}return t}},{key:"scara_distance",value:function(e,t){return Math.sqrt(Math.pow(t.a1-e.a1,2)+Math.pow(t.a2-e.a2,2)+Math.pow(t.Z-e.Z,2))}},{key:"map_cartesian_to_scara",value:function(e){var t=this,n=void 0,a=function(a,o){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={a1:0,a2:0,hand:t.last_hand*(r?-1:1),F:0,Z:0,E:0},s=Math.hypot(a,o),c=Math.atan2(o,a);if(i.a1=180*(c+i.hand*Math.acos((Math.pow(s,2)+Math.pow(t.scara_props.L1,2)-Math.pow(t.scara_props.L2,2))/(2*t.scara_props.L1*s)))/Math.PI,i.a2=180*(c-i.hand*Math.acos((Math.pow(s,2)+Math.pow(t.scara_props.L2,2)-Math.pow(t.scara_props.L1,2))/(2*t.scara_props.L2*s)))/Math.PI,isNaN(i.a1)||isNaN(i.a2))return n="ERROR: Conversion failed - GCODE results in NaNs!",void console.log(n,e,i,t.valid_point(a,o));if(i.a1>=180||i.a1<=-180)return n="ERROR: Conversion failed: GCODE falls outside useable work area!",void console.log(n,e,i);var l=i.a2+(180-i.a1),d=360-l;return Math.abs(l)<30||Math.abs(d)<30?(n="ERROR: Conversion failed: GCODE causes arms to cross!",void console.log(n,e,i,l,d)):i},o=a(e.X,e.Y);if(void 0==o&&(o=a(e.X,e.Y,!0)),void 0==o)throw this.error_reporter(n),n;return o.a1=parseFloat(o.a1.toFixed(2)),o.a2=parseFloat(o.a2.toFixed(2)),o.Z=e.Z,o.E=e.E,this.last_hand=o.hand,o}},{key:"cartesian_to_scara_feedrate",value:function(e,t,n){var a=this.scara_props.L1,o=this.scara_props.L2,r=this.pref_hand,i=Math.sqrt(Math.pow(t.X-e.X,2)+Math.pow(t.Y-e.Y,2));if(0===i)return 0;var s=(t.X-e.X)/i*n,c=(t.Y-e.Y)/i*n,l=Math.sqrt(Math.pow(e.X,2)+Math.pow(e.Y,2)),d=(e.X*s+e.Y*c)/Math.sqrt(Math.pow(e.X,2)+Math.pow(e.Y,2)),u=(e.X*c-e.Y*s)/Math.pow(l,2),h=u-r*d*(2*Math.pow(l,2)*a-Math.pow(l,2)-Math.pow(a,2)+Math.pow(o,2))/(2*Math.pow(l,2)*Math.pow(a,2))*Math.sqrt(1-(Math.pow(l,2)+Math.pow(a,2)-Math.pow(o,2))/(2*l*a)),p=u+r*d*(2*Math.pow(l,2)*o-Math.pow(l,2)-Math.pow(o,2)+Math.pow(a,2))/(2*Math.pow(l,2)*Math.pow(o,2))*Math.sqrt(1-(Math.pow(l,2)+Math.pow(o,2)-Math.pow(a,2))/(2*l*o)),f=Math.sqrt(Math.pow(h,2)+Math.pow(p,2));return parseFloat(Math.min(Math.abs(180*Math.round(f)/Math.PI),this.scara_props.max_speed).toFixed(1))}},{key:"interpolate",value:function(e,t,n,a){return{X:(n*t.X+(a-n)*e.X)/a,Y:(n*t.Y+(a-n)*e.Y)/a,Z:(n*t.Z+(a-n)*e.Z)/a,E:(n*t.E+(a-n)*e.E)/a,F:this.feed_rate}}},{key:"segmentize_cartesian_to_scara",value:function(e,t){var n=this,a=this.scara_distance(this.map_cartesian_to_scara(e),this.map_cartesian_to_scara(t));if(a<=this.max_seg_length)return[this.map_cartesian_to_scara(t)];var o=Math.round(Math.ceil(a/this.max_seg_length));return Array(o).fill(0).map((function(a,r){return n.map_cartesian_to_scara(n.interpolate(e,t,r+1,o))}))}},{key:"translate",value:function(e){var t=N({},e),n=(Math.hypot(e.X,e.Y),Math.atan2(e.Y,e.X));this.skew;return t.X=e.X+this.x_offset,t.Y=e.Y+this.y_offset,t}},{key:"plot_scara_move",value:function(e,t){var n=[],a=D.parseLine(e);if(0===a.words.length)return[[],t];if("G"===a.words[0][0]&&[0,1].includes(a.words[0][1])||!["G","M"].includes(a.words[0][0])){var o=!1;"G"===a.words[0][0]&&0===a.words[0][1]&&(o=!0);var r=this.parse_gcode_move(a.words);if(r.Y=r.Y+this.inner_rad,isNaN(r.X)&&(r.X=t.X),isNaN(r.Y)&&(r.Y=t.Y),isNaN(r.Z)&&(r.Z=t.Z),isNaN(r.E)&&(r.E=t.E),isNaN(r.F)&&(r.F=t.F),r.X===t.X&&r.Y===t.Y)return r.Z!==t.Z&&n.push("G1 Z".concat(r.Z," F").concat(r.F)),[n,r];if(void 0===t.X&&void 0===t.Y||o){var i=this.translate(t);return n.push("G0 X".concat(i.X," Y").concat(i.Y," Z").concat(i.Z," F").concat(i.F)),[n,r]}var s=this.translate(t);return n.push("G1 X".concat(s.X," Y").concat(s.Y," Z").concat(s.Z," F").concat(s.F)),[n,r]}return"G"===a.words[0][0]&&92.1===a.words[0][1]?[[],{X:0,Y:0,Z:0,E:0,F:t.F}]:[["(unable to parse line: ".concat(e,")")],t]}},{key:"convert_cartesian_to_scara",value:function(e){var t=this;e=e.replace(/[N]\d+(?= [^G])/g,"G1"),e=e.replace(/[N]\d+ /g,"");var n=e.split("\n"),a={X:void 0,Y:void 0,Z:0,F:this.feed_rate},o=n.reduce((function(e,n){var o=[],r=t.plot_scara_move(n,a),i=Object(P["a"])(r,2);return o=i[0],a=i[1],e.concat(o)}),[]);return o.join("\n")}}]),e}(),z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("center",[n("h4",[e._v("Click To Jog")]),n("canvas",{staticStyle:{border:"1px solid black"},attrs:{id:"click-move-canvas",width:e.plot_width,height:e.plot_height}})])},$=[],B=(n("a9e3"),a["default"].extend({props:{arm_rad:{default:240,type:Number},x_offset:{default:0,type:Number},y_offset:{default:0,type:Number}},data:function(){return{plot_width:300,plot_height:150}},methods:{render_bed:function(){var e=this,t=this.plot_width-20,n=t/2/(this.arm_rad+10),a=2*this.arm_rad<t?this.arm_rad:this.arm_rad*n,o=a/2+(this.plot_width-a)/2,r=document.getElementById("click-move-canvas"),i=r.getContext("2d");i.clearRect(0,0,r.offsetWidth,r.offsetHeight),i.arc(o,0,a,0,180),i.stroke(),i.beginPath(),i.moveTo(o,0),i.lineTo(o,a),i.closePath(),i.stroke();var s=function(t){var a=r.getBoundingClientRect(),i=t.clientX-a.left-o,s=t.clientY-a.top;e.$emit("move",[-i/n,s/n])};r.addEventListener("mousedown",s)}},mounted:function(){var e=this;this.$nextTick((function(){e.render_bed()}))}})),U=B,H=Object(d["a"])(U,z,$,!1,null,null,null),q=H.exports,W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-scene",{staticStyle:{width:"600px",height:"400px",margin:"auto"},attrs:{embedded:"","vr-mode-ui":"enabled: false"}},[n("a-entity",[n("a-cylinder",{attrs:{position:"0 140 -44",radius:"8",height:"280",color:"#444444"}}),n("a-cylinder",{attrs:{position:"0 100 0",radius:"12",height:"200",color:"#CCCCCC",metalness:"0.5"}}),n("a-cylinder",{attrs:{position:"42 100 -60",radius:"12",height:"200",color:"#CCCCCC",metalness:"0.5"}}),n("a-cylinder",{attrs:{position:"-42 100 -60",radius:"12",height:"200",color:"#CCCCCC",metalness:"0.5"}})],1),n("a-entity",{attrs:{position:"0 "+e.z+" 0"}},[n("a-box",{attrs:{height:"5",width:"130",depth:"140",position:"0 0 -30"}}),n("a-entity",{attrs:{rotation:"0 "+e.a1+" 0",position:"0 10 0"}},[n("a-box",{attrs:{height:"10",width:"50",depth:"140",position:"0 0 70"}}),n("a-cylinder",{attrs:{position:"0 0 0",radius:"25",height:"10"}}),n("a-cylinder",{attrs:{position:"0 0 140",radius:"25",height:"10"}}),n("a-entity",{attrs:{rotation:"0 "+e.a2+" 0",position:"0 10 140"}},[n("a-box",{attrs:{height:"10",width:"50",depth:"140",position:"0 0 70"}}),n("a-cylinder",{attrs:{position:"0 0 0",radius:"25",height:"10"}}),n("a-cylinder",{attrs:{position:"0 0 140",radius:"25",height:"10"}}),n("a-cylinder",{attrs:{position:"0 -80 140",radius:"5",height:"160",color:"black"}})],1)],1)],1),n("a-entity",{attrs:{meshline:"lineWidth: 5; path: "+e.path_str+"; color: #E20049",position:e.x_offset+" 20 "+e.y_offset}}),n("a-plane",{attrs:{position:"0 0 0",rotation:"-90 0 0",width:"400",height:"400",color:"#7BC8A4"}}),n("a-sky",{attrs:{color:"#ECECEC"}}),n("a-entity",{attrs:{camera:"","look-controls":"","orbit-controls":"target: 0 0 0; minDistance: 200; maxDistance: 600; initialPosition: 200 200 200"}})],1),n("br"),n("br"),n("v-slider",{attrs:{label:"Near Arm Angle","thumb-color":"red","thumb-label":"always",min:"-90",max:"90"},model:{value:e.a1,callback:function(t){e.a1=t},expression:"a1"}}),n("v-slider",{attrs:{label:"Far Arm Angle‏‏‎ ‎‎","thumb-color":"red","thumb-label":"always",min:"-90",max:"90"},model:{value:e.a2,callback:function(t){e.a2=t},expression:"a2"}})],1)},J=[],Q=(n("fb6a"),n("d74a")),K=a["default"].extend({props:{x_offset:Number,y_offset:Number,uploaded_gcode:String},data:function(){return{z:180,a1:0,a2:0,a1_start_angle:0,a2_start_angle:0,a1_len:140,a2_len:140,path:[]}},methods:{gen_path:function(e){e=e.replace(/[N]\d+(?= [^G])/g,"G1"),e=e.replace(/[N]\d+ /g,"");var t=[0,0,0],n=e.split("\n").reduce((function(e,n){var a=Q.parseLine(n);if(0===a.words.length)return e;var o=t.slice();for(var r in a.words){var i=a.words[r];"X"===i[0]&&(o[0]=i[1]),"Y"===i[0]&&(o[2]=i[1]),"Z"===i[0]&&(o[1]=i[1])}return t=o,e.push(o),e}),[]);this.path=n}},watch:{uploaded_gcode:function(){this.gen_path(this.uploaded_gcode)}},computed:{path_str:function(){return this.path.reduce((function(e,t){return"".concat(e).concat(""!=e?",":""," ").concat(t[0]," ").concat(t[1]," ").concat(t[2])}),"")},x2:function(){var e=Math.cos((this.a1+this.a1_start_angle)*Math.PI/180)*this.a1_len,t=e+Math.cos((this.a2+this.a2_start_angle)*Math.PI/180)*this.a2_len;return t},y2:function(){var e=Math.sin((this.a1+this.a1_start_angle)*Math.PI/180)*this.a1_len,t=e+Math.sin((this.a2+this.a2_start_angle)*Math.PI/180)*this.a2_len;return t}},mounted:function(){var e=this;this.$nextTick((function(){e.gen_path(e.uploaded_gcode)}))}}),ee=K,te=n("ba0d"),ne=Object(d["a"])(ee,W,J,!1,null,null,null),ae=ne.exports;h()(ne,{VSlider:te["a"]});var oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{width:"300px","max-width":"100%"}},[n("v-text-field",{attrs:{label:"Custom Text"},model:{value:e.userText,callback:function(t){e.userText=t},expression:"userText"}}),n("v-text-field",{attrs:{type:"number",label:"Font Size"},model:{value:e.fontSize,callback:function(t){e.fontSize=e._n(t)},expression:"fontSize"}}),n("v-select",{attrs:{items:e.fontOptions,"item-text":"name","item-value":"file"},model:{value:e.fontName,callback:function(t){e.fontName=t},expression:"fontName"}})],1),n("br"),n("canvas",{staticStyle:{border:"1px solid black"},attrs:{id:"canvas",width:e.plot_width,height:e.plot_height}})])},re=[],ie=(n("a434"),n("a788")),se=n("dbcd"),ce=n.n(se),le=n("84fa"),de=n.n(le),ue=a["default"].extend({props:{arm_rad:{default:240,type:Number},x_offset:{default:0,type:Number},y_offset:{default:0,type:Number}},data:function(){return{plot_width:500,plot_height:300,userText:"SCARA",fontName:"ChunkFive-Regular.otf",fontSize:40,userInputDebounce:0,fontOptions:[{name:"ChunkFive (block)",file:"ChunkFive-Regular.otf"},{name:"GreatVibes (caligraphy)",file:"GreatVibes-Regular.ttf"}]}},watch:{userText:function(){var e=this;clearTimeout(this.userInputDebounce),this.userInputDebounce=setTimeout((function(){return e.textToGcode()}),500)},fontName:function(){var e=this;clearTimeout(this.userInputDebounce),this.userInputDebounce=setTimeout((function(){return e.textToGcode()}),250)},fontSize:function(){var e=this;clearTimeout(this.userInputDebounce),this.userInputDebounce=setTimeout((function(){return e.textToGcode()}),500)},x_offset:function(){var e=this;clearTimeout(this.userInputDebounce),this.userInputDebounce=setTimeout((function(){return e.textToGcode()}),500)},y_offset:function(){var e=this;clearTimeout(this.userInputDebounce),this.userInputDebounce=setTimeout((function(){return e.textToGcode()}),500)}},methods:{textToGcode:function(){var e=this,t=this.arm_rad/2+(this.plot_width-this.arm_rad)/2;ie["a"].load("fonts/".concat(this.fontName),(function(n,a){if(n)alert("Font could not be loaded: "+n);else{var o=a.getPath(e.userText,0,e.fontSize,e.fontSize),r=o.getBoundingBox(),i=r.x2-r.x1,s=o.toPathData(2),c=s.split("Z"),l=10,d="G1Z".concat(l),u="";c.forEach((function(n){var a=de()(n).unarc().abs(),o=[],r=[],s=[void 0,void 0],c=function(n,a,c,l,d){c-=i/2,0==o.length&&(s=[c,l]),o.push("G1X".concat(-(c+e.x_offset),"Y").concat(l+e.y_offset)),r.push("".concat(r.length>0?"L":"M"," ").concat(c+e.x_offset+t," ").concat(l+e.y_offset))},h=new ce.a(c);a.iterate(h.svgPathIterator),o.splice(1,0,"G1Z0"),void 0==s[0]||void 0==s[1]||isNaN(s[0])||isNaN(s[1])||o.push("G1X".concat(-(s[0]+e.x_offset),"Y").concat(s[1]+e.y_offset)),o.push("G1Z".concat(l)),d=d+"\n"+o.join("\n"),r.push("Z"),u=u+" "+r.join(" ")})),e.$emit("gcodegen",d);var h=document.getElementById("canvas"),p=h.getContext("2d");p.clearRect(0,0,h.offsetWidth,h.offsetHeight);var f=new Path2D(u);p.stroke(f),p.arc(t,0,e.arm_rad,0,180),p.stroke(),p.beginPath(),p.moveTo(t,0),p.lineTo(t,e.arm_rad),p.closePath(),p.stroke()}}))}},mounted:function(){var e=this;this.$nextTick((function(){e.textToGcode()}))}}),he=ue,pe=n("b974"),fe=n("8654"),ve=Object(d["a"])(he,oe,re,!1,null,null,null),_e=ve.exports;h()(ve,{VSelect:pe["a"],VTextField:fe["a"]});var ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{width:"300px","max-width":"100%"}},[n("v-file-input",{attrs:{placeholder:"Upload Image",accept:".svg,.png,.jpg,.jpeg"},on:{change:e.load_img_file}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.imageSize[0]+e.imageSize[1]>0,expression:"imageSize[0] + imageSize[1] > 0"}]},[n("div",{staticStyle:{display:"flex"}},[n("canvas",{staticStyle:{border:"1px solid black"},attrs:{id:"svg-canvas",width:"0",height:"0"}}),n("div",{staticStyle:{width:"300px","margin-left":"20px",border:"1px #888 solid","background-color":"lightblue",padding:"16px","border-radius":"10px"}},[n("br"),n("v-slider",{attrs:{"thumb-label":"always",min:"0",max:"200",label:"GCode Scaler %"},on:{change:e.svgToGcode},model:{value:e.gcodeScale,callback:function(t){e.gcodeScale=t},expression:"gcodeScale"}}),"photo"==e.imageType?n("div",[n("br"),n("v-slider",{attrs:{"thumb-label":"always",min:"-1",max:"255",label:"Threshold"},on:{change:e.photoToSVG},scopedSlots:e._u([{key:"append",fn:function(){return[n("v-icon",{directives:[{name:"ripple",rawName:"v-ripple"},{name:"show",rawName:"v-show",value:-1!=e.potraceParams.threshold,expression:"potraceParams.threshold != -1"}],on:{click:function(t){e.potraceParams.threshold=-1}}},[e._v(" mdi-replay ")])]},proxy:!0}],null,!1,3891612062),model:{value:e.potraceParams.threshold,callback:function(t){e.$set(e.potraceParams,"threshold",t)},expression:"potraceParams.threshold"}}),n("br"),n("v-slider",{attrs:{"thumb-label":"always",min:"0",max:"50",label:"Min Speckle Size"},on:{change:e.photoToSVG},model:{value:e.potraceParams.turdSize,callback:function(t){e.$set(e.potraceParams,"turdSize",t)},expression:"potraceParams.turdSize"}}),n("br"),n("v-checkbox",{attrs:{label:"Invert"},on:{change:e.photoToSVG},model:{value:e.potraceParams.blackOnWhite,callback:function(t){e.$set(e.potraceParams,"blackOnWhite",t)},expression:"potraceParams.blackOnWhite"}})],1):e._e()],1)]),e._v(" Print Size: "+e._s((e.imageSize[0]*e.gcodeScale/100).toFixed(1))+" x "+e._s((e.imageSize[1]*e.gcodeScale/100).toFixed(1))+" mm ")])])},me=[],be=(n("a630"),n("3ca3"),Math.PI),we=2*be,xe={approximationScale:1,curve_distance_epsilon:1e-30,curveColinearityEpsilon:1e-30,curveAngleToleranceEpsilon:.01,angleTolerance:.4,recursionLimit:32,cuspLimit:0},ye=function(){function e(t,n){var a=this;Object(X["a"])(this,e),this.svgPathIterator=function(e,t,n,o){var r,i,s,c,l,d,u,h,p,f=e[0],v=!1;switch(f){case"M":for(r=1;r<e.length;r+=2)i=e[r],s=e[r+1],a.consumer(n,o,i,s,t,["M",i,s]),n=i,o=s;break;case"L":for(r=1;r<e.length;r+=2)i=e[r],s=e[r+1],a.consumer(n,o,i,s,t,["L",i,s]),n=i,o=s;break;case"H":for(s=o,r=1;r<e.length;r+=2)i=e[r],a.consumer(n,o,i,s,t,["H",i]),n=i;break;case"V":for(i=n,r=1;r<e.length;r+=2)s=e[r],a.consumer(n,o,i,s,t,["V",s]),o=s;break;case"Z":a.consumer(n,o,n,o,t,["Z"]);break;case"Q":v=!0;case"C":var _=v?4:6;for(r=1;r<e.length;r+=_)i=n,s=o,c=e[r],l=e[r+1],d=v?c:e[r+2],u=v?l:e[r+3],h=v?e[r+2]:e[r+4],p=v?e[r+3]:e[r+5],a.linearize(i,s,c,l,d,u,h,p,t),n=i,o=s;break;default:throw new Error("path command '"+f+"' not supported yet")}},this.consumer=function(e,n,o,r,i,s){t(e,n,o,r,i,s),a.prevX=o,a.prevY=r},this.opts=Object.assign({},xe,n),this.prevX=0,this.prevY=0}return Object(Y["a"])(e,[{key:"linearize",value:function(e,t,n,a,o,r,i,s,c){this.linearizeRecursive(e,t,n,a,o,r,i,s,c,0);var l=this.prevX,d=this.prevY;l===i&&d===s||this.consumer(l,d,i,s,c,["L",i,s])}},{key:"distanceTo",value:function(e,t,n,a){var o=n-e,r=a-t;return Math.sqrt(o*o+r*r)}},{key:"linearizeRecursive",value:function(e,t,n,a,o,r,i,s,c,l){var d,u,h,p=this.opts.cuspLimit,f=this.opts.curveColinearityEpsilon,v=this.opts.curveAngleToleranceEpsilon,_=this.opts.angleTolerance,g=Math.pow(.5/this.opts.approximationScale,2),m=(e+n)/2,b=(t+a)/2,w=(n+o)/2,x=(a+r)/2,y=(o+i)/2,k=(r+s)/2,S=(m+w)/2,M=(b+x)/2,C=(w+y)/2,j=(x+k)/2,T=(S+C)/2,O=(M+j)/2,G=i-e,E=s-t,R=Math.abs((n-i)*E-(a-s)*G),P=Math.abs((o-i)*E-(r-s)*G);switch((R>f?2:0)+(P>f?1:0)){case 0:if(h=G*G+E*E,0===h)R=this.distanceTo(e,t,n,a),P=this.distanceTo(i,s,o,r);else{if(h=1/h,d=n-e,u=a-t,R=h*(d*G+u*E),d=o-e,u=r-t,P=h*(d*G+u*E),R>0&&R<1&&P>0&&P<1)return void this.consumer(e,t,i,s,c,["L",i,s]);R=R<=0?this.distanceTo(n,a,e,t):R>=1?this.distanceTo(n,a,i,s):this.distanceTo(n,a,e+R*G,t+R*E),P=P<=0?this.distanceTo(o,r,e,t):P>=1?this.distanceTo(o,r,i,s):this.distanceTo(o,r,e+P*G,t+P*E)}if(R>P){if(R<g)return void this.consumer(e,t,n,a,c,["L",n,a])}else if(P<g)return void this.consumer(e,t,o,r,c,["L",o,r]);break;case 1:if(P*P<=g*(G*G+E*E)){if(_<v)return void this.consumer(e,t,w,x,c,["L",w,x]);if(d=Math.abs(Math.atan2(s-r,i-o)-Math.atan2(r-a,o-n)),d>=be&&(d=we-d),d<_)return this.consumer(e,t,n,a,c,["L",n,a]),void this.consumer(n,a,o,r,c,["L",o,r]);if(0!==p&&d>be-p)return void this.consumer(e,t,o,r,c,["L",o,r])}break;case 2:if(R*R<=g*(G*G+E*E)){if(_<v)return void this.consumer(e,t,w,x,c,["L",w,x]);if(d=Math.abs(Math.atan2(r-a,o-n)-Math.atan2(a-t,n-e)),d>=be&&(d=we-d),d<_)return this.consumer(e,t,n,a,c,["L",n,a]),void this.consumer(n,a,o,r,c,["L",o,r]);if(0!==p&&d>be-p)return void this.consumer(e,t,n,a,c,["L",n,a])}break;case 3:if((R+P)*(R+P)<=g*(G*G+E*E)){if(_<v)return void this.consumer(e,t,w,x,c,["L",w,x]);if(h=Math.atan2(r-a,o-n),d=Math.abs(h-Math.atan2(a-t,n-e)),u=Math.abs(Math.atan2(s-r,i-o)-h),d>=be&&(d=we-d),u>=be&&(u=we-u),d+u<_)return void this.consumer(e,t,w,x,c,["L",w,x]);if(0!==p){if(d>be-p)return void this.consumer(e,t,n,a,c,["L",n,a]);if(u>be-p)return void this.consumer(e,t,o,r,c,["L",o,r])}}break}var L=l+1;L>=this.opts.recursionLimit?this.consumer(e,t,i,s,c,["L",i,s]):(this.linearizeRecursive(e,t,m,b,S,M,T,O,c,L),this.linearizeRecursive(T,O,C,j,y,k,i,s,c,L))}}]),e}(),ke=n("cd7e"),Se=n.n(ke),Me=n("f46b"),Ce=a["default"].extend({data:function(){return{imageSize:[0,0],rawPhoto:void 0,rawSVG:"",imageType:"",gcodeScale:25,potraceParams:{threshold:-1,turdSize:15,blackOnWhite:!0},finalGcode:""}},methods:{load_img_file:function(e){var t=this;if(null!==e){var n=new FileReader;["image/jpeg","image/jpg","image/png"].includes(e.type)?(n.onload=function(e){t.imageType="photo",t.rawPhoto=n.result,t.photoToSVG()},Object(Me["a"])().toBlob(e,{max:400}).then((function(e){return n.readAsArrayBuffer(e)}))):"image/svg+xml"==e.type?(n.onload=function(e){t.rawSVG=n.result,t.svgToGcode()},n.readAsText(e)):this.imageType=""}},photoToSVG:function(){var e=this;void 0!=this.rawPhoto&&Se.a.trace(this.rawPhoto,this.potraceParams,(function(t,n){if(t)throw t;e.rawSVG=n,e.svgToGcode()}))},svgToGcode:function(){var e=this,t=(new DOMParser).parseFromString(this.rawSVG,"image/svg+xml"),n=Array.from(t.querySelectorAll("path").values()).reduce((function(e,t){var n=t.getAttribute("d");return e.push(n),e}),[]),a=5,o="",r="",i=[0,0],s=[0,0];n.forEach((function(t){var n=de()(t).unarc().abs(),c=[],l=[],d=function(t,n,o,r,d,u){o>i[0]&&(i[0]=o),r>i[1]&&(i[1]=r),o=o*e.gcodeScale/100,r=r*e.gcodeScale/100,"M"==u[0]?(c.push(["G0","Z".concat(a)]),c.push(["G0","X".concat(o),"Y".concat(r)]),c.push(["G0","Z0"]),s=[o,r]):"Z"==u[0]?c.push(["G0","X".concat(s[0]),"Y".concat(s[1])]):c.push(["G1","X".concat(o),"Y".concat(r)]),l.push(u.join(" "))},u=new ye(d,{recursionLimit:4,curve_distance_epsilon:1e-5,curveColinearityEpsilon:1e-5});n.iterate(u.svgPathIterator),o=o+"\n"+c.map((function(e){return e.join("")})).join("\n"),r=r+" "+l.join(" ")}));var c=document.getElementById("svg-canvas");this.imageSize=i,c.setAttribute("width","".concat(i[0])),c.setAttribute("height","".concat(i[1]));var l=c.getContext("2d");l.clearRect(0,0,c.offsetWidth,c.offsetHeight);var d=new Path2D(r);l.stroke(d),this.$emit("gcodegen",o)}}}),je=Ce,Te=n("ac7c"),Oe=n("23a7"),Ge=n("269a"),Ee=n.n(Ge),Re=n("5607"),Pe=Object(d["a"])(je,ge,me,!1,null,null,null),Le=Pe.exports;h()(Pe,{VCheckbox:Te["a"],VFileInput:Oe["a"],VIcon:f["a"],VSlider:te["a"]}),Ee()(Pe,{Ripple:Re["a"]});var Ae=n("9e3e"),Xe=new L,Ye=a["default"].extend({components:{ClickToMove:q,ScaraSim3D:ae,TextToGcode:_e,ImgToGcode:Le},data:function(){var e=this;return{raw_gcode:"",send_buffer:[],ready_to_send:!0,last_resp:void 0,send_buffer_interval:void 0,converted_gcode:[],scara_conv:new V((function(t){e.$toast(t,{x:"center",color:"red"})})),send_log:[],send_log_index:0,recv_buffer:"",serial_log:[],cmd:"",jog_inc:{x:10,y:10,z:10},goto:{x:0,y:0},serial_connected:!1,attempting_to_connect:!1,cancel_connect:!1,reader:void 0,writer:void 0,regen_debounce:0}},watch:{"scara_conv.x_offset":function(){clearTimeout(this.regen_debounce),this.regen_debounce=setTimeout(this.regen_converted_gcode,500)},"scara_conv.y_offset":function(){clearTimeout(this.regen_debounce),this.regen_debounce=setTimeout(this.regen_converted_gcode,500)}},methods:{click_move:function(e){var t,n,a;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:t=Object(P["a"])(e,2),n=t[0],a=t[1],this.goto.x=n,this.goto.y=a,this.goto_point();case 4:case"end":return o.stop()}}),null,this)},goto_point:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return e="G0 X".concat(this.goto.x," Y").concat(this.goto.y," F20000\n"),t.next=3,regeneratorRuntime.awrap(this.write_serial(e));case 3:case"end":return t.stop()}}),null,this)},home_scara:function(){var e,t,n,a,o,r,i=arguments;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:e=i.length>0&&void 0!==i[0]&&i[0],t=["G28"],n=["G28","G0 F20000","G0 X120 Y120 F20000"],a=e?t:n,s.t0=regeneratorRuntime.keys(a);case 5:if((s.t1=s.t0()).done){s.next=12;break}return o=s.t1.value,r=a[o],s.next=10,regeneratorRuntime.awrap(this.write_serial(r+"\n"));case 10:s.next=5;break;case 12:case"end":return s.stop()}}),null,this)},origin_scara:function(){var e,t,n;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:e=["G0 Z30 F5000","G0 X0 Y0 F5000","G0 Z0 F5000"],a.t0=regeneratorRuntime.keys(e);case 2:if((a.t1=a.t0()).done){a.next=9;break}return t=a.t1.value,n=e[t],a.next=7,regeneratorRuntime.awrap(this.write_serial(n+"\n"));case 7:a.next=2;break;case 9:case"end":return a.stop()}}),null,this)},recover_prev_cmd:function(e){this.cmd==this.send_log[this.send_log_index]?(this.send_log_index+=e,this.send_log_index<this.send_log.length&&(this.cmd=this.send_log[this.send_log_index])):this.send_log.length>0&&(this.send_log_index=0,this.cmd=this.send_log[this.send_log_index])},write_cmd_to_serial:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.write_serial(this.cmd+"\n"));case 2:this.send_log.unshift(this.cmd),this.cmd="";case 4:case"end":return e.stop()}}),null,this)},write_serial:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:Xe.postMessage({type:T.PushToBuffer,data:e});case 1:case"end":return t.stop()}}))},serial_connect:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(navigator.serial.requestPort());case 2:Xe.postMessage({type:T.SerialConnect});case 3:case"end":return e.stop()}}))},regen_converted_gcode:function(){this.converted_gcode=this.raw_gcode.split("\n")},load_gcode_file:function(e){var t=this;if(null!==e){var n=new FileReader;n.onload=function(e){t.raw_gcode=e.target.result,t.regen_converted_gcode()},n.readAsText(e)}},gcode_from_text:function(e){this.raw_gcode=e,this.regen_converted_gcode(),this.converted_gcode=this.converted_gcode.concat(["G0Z10"])},save_gcode:function(e){Object(Ae["a"])(new Blob([e],{type:"text/plain"}),"jscara_export.gcode")},clear_buffer:function(){Xe.postMessage({type:T.ClearBuffer}),this.ready_to_send=!0},send_converted_gcode:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:Xe.postMessage({type:T.PushToBuffer,data:this.converted_gcode});case 1:case"end":return e.stop()}}),null,this)}},mounted:function(){var e=this;if(void 0!==navigator.serial){var t=document.getElementById("notSupported");t.style.display="none"}Xe.onmessage=function(t){var n=t.data;n.type==O.SerialConnected?e.serial_connected=!0:n.type==O.SerialRecv?e.serial_log.unshift(n.data):n.type==O.SerialError&&e.$toast(n.data,{x:"center",color:"red"})}}}),Fe=Ye,Ne=(n("cccb"),n("cd55")),Ze=n("49e2"),De=n("c865"),Ie=n("0393"),Ve=n("0fd9"),ze=Object(d["a"])(Fe,E,R,!1,null,null,null),$e=ze.exports;h()(ze,{VBtn:p["a"],VExpansionPanel:Ne["a"],VExpansionPanelContent:Ze["a"],VExpansionPanelHeader:De["a"],VExpansionPanels:Ie["a"],VFileInput:Oe["a"],VRow:Ve["a"],VTextField:fe["a"]});var Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"scara-converter"}},[n("v-file-input",{on:{change:e.load_gcode_file}})],1)},Ue=[],He=(n("b0c0"),a["default"].extend({data:function(){return{scara:new V}},methods:{download_gcode:function(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},load_gcode_file:function(e){var t=this,n=new FileReader;n.onload=function(n){t.download_gcode("".concat(e.name.replace(".gcode","").replace(".nc",""),"_converted.gcode"),t.scara.convert_cartesian_to_scara(n.target.result))},n.readAsText(e)}},mounted:function(){}})),qe=He,We=(n("b396"),Object(d["a"])(qe,Be,Ue,!1,null,"56b51dc2",null)),Je=We.exports;h()(We,{VFileInput:Oe["a"]});var Qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-slider",{staticStyle:{padding:"10px 24px"},attrs:{min:"-80",max:"80","thumb-label":"",label:"Arm 1 Angle:"},on:{input:e.plotScara},model:{value:e.a1,callback:function(t){e.a1=t},expression:"a1"}}),n("v-slider",{staticStyle:{padding:"10px 24px"},attrs:{min:"-80",max:"80","thumb-label":"",label:"Arm 2 Angle:"},on:{input:e.plotScara},model:{value:e.a2,callback:function(t){e.a2=t},expression:"a2"}}),n("div",{staticStyle:{border:"1px dotted #222"}},[n("svg",{attrs:{width:e.width,height:e.height}})])],1)},Ke=[],et=Object.assign({},n("fd32"),n("f1df"),n("ce24"),n("4611"),n("bc17"),n("a1eb")),tt=a["default"].extend({data:function(){return{a1:0,a2:0,width:500,height:500,padding:{top:30,right:30,bottom:60,left:60},plot_area:{width:400,height:400}}},methods:{plotScara:function(){var e=et.select(this.$el).select("svg");if(e.selectAll("*").remove(),void 0!==e){var t=e.append("g");t.attr("width",this.width-this.padding.left-this.padding.right).attr("height",this.height-this.padding.top-this.padding.bottom).attr("transform","translate("+this.padding.left+","+this.padding.top+")").attr("class","davenport-plot-area");var n=et.scaleLinear().domain([0,this.plot_area.width]).range([0,this.width-this.padding.left-this.padding.right]);t.append("g").attr("transform","translate(0,"+(this.height-this.padding.bottom-10)+")").call(et.axisBottom(n));var a=et.scaleLinear().domain([0,this.plot_area.height]).range([this.height-this.padding.top-this.padding.bottom,0]);t.append("g").call(et.axisLeft().scale(a));var o=90,r=90,i=this.plot_area.width/2+Math.cos((this.a1+o)*Math.PI/180)*I.L1,s=Math.sin((this.a1+o)*Math.PI/180)*I.L1;t.append("line").attr("x1",n(this.plot_area.width/2)).attr("x2",n(i)).attr("y1",a(0)).attr("y2",a(s)).attr("stroke","coral").attr("stroke-width",20).attr("stroke-linecap","round");var c=i+Math.cos((this.a2+r)*Math.PI/180)*I.L2,l=s+Math.sin((this.a2+r)*Math.PI/180)*I.L2;t.append("line").attr("x1",n(i)).attr("x2",n(c)).attr("y1",a(s)).attr("y2",a(l)).attr("stroke","teal").attr("stroke-width",20).attr("stroke-linecap","round")}}},mounted:function(){var e=this;this.$nextTick((function(){e.plotScara()}))}}),nt=tt,at=Object(d["a"])(nt,Qe,Ke,!1,null,null,null),ot=at.exports;h()(at,{VSlider:te["a"]}),a["default"].use(G["a"]);var rt=[{path:"/",name:"home",component:$e},{path:"/scara",name:"SCARA",component:Je},{path:"/sim",name:"sim",component:ot}],it=new G["a"]({mode:"history",base:"/jscara-console/",routes:rt}),st=it,ct=n("2f62");a["default"].use(ct["a"]);var lt=new ct["a"].Store({state:{},mutations:{},actions:{},modules:{}}),dt=n("9483");Object(dt["a"])("".concat("/jscara-console/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var ut=n("ce5b"),ht=n.n(ut),pt=(n("bf40"),n("87f6")),ft=n.n(pt);a["default"].use(ht.a),a["default"].use(ft.a,{showClose:!1,color:"#403e4d"});var vt={},_t=new ht.a(vt);a["default"].config.productionTip=!1,a["default"].config.ignoredElements=["a-scene","a-assets","a-sky","a-camera","a-cursor","a-animation","a-entity","a-box","a-cylinder","a-plane"],new a["default"]({router:st,store:lt,vuetify:_t,render:function(e){return e(j)}}).$mount("#app")}});
//# sourceMappingURL=app.b299bb57.js.map